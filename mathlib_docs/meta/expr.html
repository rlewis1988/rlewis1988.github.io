<!DOCTYPE html><html lang="en"><head><title>meta.expr</title><meta charset="UTF-8"><link rel="stylesheet" href="https://robertylewis.com/mathlib_docs/style.css"></head><body><div class="mod_doc"><h1>Additional operations on expr and related types</h1>

<p>This file defines basic operations on the types expr, name, declaration, level, environment.</p>

<p>This file is mostly for non-tactics. Tactics should generally be placed in <code>tactic.core</code>.</p>

<p>## Tags
 expr, name, declaration, level, environment, meta, metaprogramming, tactic</p>
</div><div class="def"><a id="binder_info.inhabited"></a>      <span class="decl_name">binder_info.inhabited</span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/logic.html#inhabited">inhabited</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#binder_info">binder_info</a></div>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="binder_info.brackets"></a>      <span class="decl_name">binder_info.brackets</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#binder_info">binder_info</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a></div>
<div class="indent"><p>The brackets corresponding to a given binder_info.</p>
       </div>
</div><div class="def"><a id="name.map_prefix"></a>      <span class="decl_name">name.map_prefix</span> <span class="decl_args">(f : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a> → <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>Find the largest prefix <code>n</code> of a <code>name</code> such that <code>f n ≠ none</code>, then replace this prefix
with the value of <code>f n</code>.</p>
       </div>
</div><div class="def"><a id="name.deinternalize_field"></a>      <span class="decl_name">name.deinternalize_field</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>If <code>nm</code> is a simple name (having only one string component) starting with <code>_</code>, then <code>deinternalize_field nm</code> removes the underscore. Otherwise, it does nothing.</p>
       </div>
</div><div class="def"><a id="name.get_nth_prefix"></a>      <span class="decl_name">name.get_nth_prefix</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(a_1 : ℕ)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p><code>get_nth_prefix nm n</code> removes the last <code>n</code> components from <code>nm</code></p>
       </div>
</div><div class="def"><a id="name.pop_nth_prefix"></a>      <span class="decl_name">name.pop_nth_prefix</span> <span class="decl_args">(nm : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(n : ℕ)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>Pops the top <code>n</code> prefixes from the given name.</p>
       </div>
</div><div class="def"><a id="name.pop_prefix"></a>      <span class="decl_name">name.pop_prefix</span> <span class="decl_args">(n : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>Pop the prefix of a name</p>
       </div>
</div><div class="def"><a id="name.from_components"></a>      <span class="decl_name">name.from_components</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>Build a name from components. For example <code>from_components ["foo","bar"]</code> becomes
 <code>`foo.bar</code></p>
       </div>
</div><div class="def"><a id="name.sanitize_name"></a>      <span class="decl_name">name.sanitize_name</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p><code>name</code>s can contain numeral pieces, which are not legal names
 when typed/passed directly to the parser. We turn an arbitrary
 name into a legal identifier name by turning the numbers to strings.</p>
       </div>
</div><div class="def"><a id="name.append_suffix"></a>      <span class="decl_name">name.append_suffix</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>Append a string to the last component of a name</p>
       </div>
</div><div class="def"><a id="name.head"></a>      <span class="decl_name">name.head</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a></div>
<div class="indent"><p>The first component of a name, turning a number to a string</p>
       </div>
</div><div class="def"><a id="name.is_private"></a>      <span class="decl_name">name.is_private</span> <span class="decl_args">(n : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Tests whether the first component of a name is <code>"_private"</code></p>
       </div>
</div><div class="def"><a id="name.last"></a>      <span class="decl_name">name.last</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a></div>
<div class="indent"><p>Get the last component of a name, and convert it to a string.</p>
       </div>
</div><div class="def"><a id="name.length"></a>      <span class="decl_name">name.length</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type">ℕ</div>
<div class="indent"><p>Returns the number of characters used to print all the string components of a name,
 including periods between name segments. Ignores numerical parts of a name.</p>
       </div>
</div><div class="def"><a id="name.has_prefix"></a>      <span class="decl_name">name.has_prefix</span> <span class="decl_args">(P : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a> → <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a>)</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Checks whether <code>nm</code> has a prefix (including itself) such that P is true</p>
       </div>
</div><div class="def"><a id="name.add_prime"></a>      <span class="decl_name">name.add_prime</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>Appends <code>'</code> to the end of a name.</p>
       </div>
</div><div class="def"><a id="name.last_string"></a>      <span class="decl_name">name.last_string</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="level.nonzero"></a>      <span class="decl_name">level.nonzero</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/level.html#level">level</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Tests whether a universe level is non-zero for all assignments of its variables</p>
       </div>
</div><div class="cnst"><a id="binder"></a>      <span class="decl_name">binder</span>  <span class="decl_args">:</span>       <div class="decl_type">Type</div>
<div class="indent"><p>The type of binders containing a name, the binding info and the binding type</p>
       </div>
</div><div class="def"><a id="binder.decidable_eq"></a>      <span class="decl_name">binder.decidable_eq</span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#decidable_eq">decidable_eq</a> <a href="https://robertylewis.com/mathlib_docs/meta/expr.html#binder">binder</a></div>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="binder.to_string"></a>      <span class="decl_name">binder.to_string</span> <span class="decl_args">(b : <a href="https://robertylewis.com/mathlib_docs/meta/expr.html#binder">binder</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a></div>
<div class="indent"><p>Turn a binder into a string. Uses expr.to_string for the type.</p>
       </div>
</div><div class="def"><a id="binder.inhabited"></a>      <span class="decl_name">binder.inhabited</span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/logic.html#inhabited">inhabited</a> <a href="https://robertylewis.com/mathlib_docs/meta/expr.html#binder">binder</a></div>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="binder.has_to_string"></a>      <span class="decl_name">binder.has_to_string</span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/data/to_string.html#has_to_string">has_to_string</a> <a href="https://robertylewis.com/mathlib_docs/meta/expr.html#binder">binder</a></div>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="binder.has_to_format"></a>      <span class="decl_name">binder.has_to_format</span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/format.html#has_to_format">has_to_format</a> <a href="https://robertylewis.com/mathlib_docs/meta/expr.html#binder">binder</a></div>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="binder.has_to_tactic_format"></a>      <span class="decl_name">binder.has_to_tactic_format</span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#has_to_tactic_format">has_to_tactic_format</a> <a href="https://robertylewis.com/mathlib_docs/meta/expr.html#binder">binder</a></div>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="nat.mk_numeral"></a>      <span class="decl_name">nat.mk_numeral</span> <span class="decl_args">(type <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_zero">has_zero</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_one">has_one</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_add">has_add</a> : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(a : ℕ)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>nat.mk_numeral n</code> embeds <code>n</code> as a numeral expression inside a type with 0, 1, and +.
<code>type</code>: an expression representing the target type. This must live in Type 0.
<code>has_zero</code>, <code>has_one</code>, <code>has_add</code>: expressions of the type <code>has_zero %%type</code>, etc.</p>
       </div>
</div><div class="def"><a id="int.mk_numeral"></a>      <span class="decl_name">int.mk_numeral</span> <span class="decl_args">(type <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_zero">has_zero</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_one">has_one</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_add">has_add</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_neg">has_neg</a> : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(a : ℤ)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>int.mk_numeral z</code> embeds <code>z</code> as a numeral expression inside a type with 0, 1, +, and -.
<code>type</code>: an expression representing the target type. This must live in Type 0.
<code>has_zero</code>, <code>has_one</code>, <code>has_add</code>, <code>has_neg</code>: expressions of the type <code>has_zero %%type</code>, etc.</p>
       </div>
</div><div class="def"><a id="expr.to_pos_nat"></a>      <span class="decl_name">expr.to_pos_nat</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> ℕ</div>
<div class="indent"><p>Turns an expression into a positive natural number, assuming it is only built up from
 <code>has_one.one</code>, <code>bit0</code> and <code>bit1</code>.</p>
       </div>
</div><div class="def"><a id="expr.to_nat"></a>      <span class="decl_name">expr.to_nat</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> ℕ</div>
<div class="indent"><p>Turns an expression into a natural number, assuming it is only built up from
 <code>has_one.one</code>, <code>bit0</code>, <code>bit1</code> and <code>has_zero.zero</code>.</p>
       </div>
</div><div class="def"><a id="expr.to_int"></a>      <span class="decl_name">expr.to_int</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> ℤ</div>
<div class="indent"><p>Turns an expression into a integer, assuming it is only built up from
 <code>has_one.one</code>, <code>bit0</code>, <code>bit1</code>, <code>has_zero.zero</code> and a optionally a single <code>has_neg.neg</code> as head.</p>
       </div>
</div><div class="def"><a id="expr.replace_with"></a>      <span class="decl_name">expr.replace_with</span> <span class="decl_args">(e s s' : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>replace_with e s s'</code> replaces ocurrences of <code>s</code> with <code>s'</code> in <code>e</code>.</p>
       </div>
</div><div class="def"><a id="expr.apply_replacement_fun"></a>      <span class="decl_name">expr.apply_replacement_fun</span> <span class="decl_args">(f : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a> → <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Apply a function to each constant (inductive type, defined function etc) in an expression.</p>
       </div>
</div><div class="def"><a id="expr.is_mvar"></a>      <span class="decl_name">expr.is_mvar</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Tests whether an expression is a meta-variable.</p>
       </div>
</div><div class="def"><a id="expr.is_sort"></a>      <span class="decl_name">expr.is_sort</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Tests whether an expression is a sort.</p>
       </div>
</div><div class="def"><a id="expr.to_implicit"></a>      <span class="decl_name">expr.to_implicit</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>If <code>e</code> is a local constant, <code>to_implicit e</code> changes the binder info of <code>e</code> to <code>implicit</code>.
See also <code>to_implicit_binder</code>, which also changes lambdas and pis.</p>
       </div>
</div><div class="def"><a id="expr.to_implicit_binder"></a>      <span class="decl_name">expr.to_implicit_binder</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>If <code>e</code> is a local constant, lamda, or pi expression, <code>to_implicit_binder e</code> changes the binder
info of <code>e</code> to <code>implicit</code>. See also <code>to_implicit</code>, which only changes local constants.</p>
       </div>
</div><div class="def"><a id="expr.list_local_consts"></a>      <span class="decl_name">expr.list_local_consts</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Returns a list of all local constants in an expression (without duplicates).</p>
       </div>
</div><div class="def"><a id="expr.list_constant"></a>      <span class="decl_name">expr.list_constant</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/rb_map.html#name_set">name_set</a></div>
<div class="indent"><p>Returns a name_set of all constants in an expression.</p>
       </div>
</div><div class="def"><a id="expr.list_meta_vars"></a>      <span class="decl_name">expr.list_meta_vars</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Returns a list of all meta-variables in an expression (without duplicates).</p>
       </div>
</div><div class="def"><a id="expr.list_names_with_prefix"></a>      <span class="decl_name">expr.list_names_with_prefix</span> <span class="decl_args">(pre : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/rb_map.html#name_set">name_set</a></div>
<div class="indent"><p>Returns a name_set of all constants in an expression starting with a certain prefix.</p>
       </div>
</div><div class="def"><a id="expr.contains_constant"></a>      <span class="decl_name">expr.contains_constant</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(p : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a> → Prop)</span> <span class="decl_args">[<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#decidable_pred">decidable_pred</a> p]</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Returns true if <code>e</code> contains a name <code>n</code> where <code>p n</code> is true.
 Returns <code>true</code> if <code>p name.anonymous</code> is true</p>
       </div>
</div><div class="def"><a id="expr.is_num_eq"></a>      <span class="decl_name">expr.is_num_eq</span> <span class="decl_args">(a a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>is<em>num</em>eq n1 n2 returns true if n1 and n2 are both numerals with the same numeral structure,
ignoring differences in type and type class arguments.</p>
       </div>
</div><div class="def"><a id="expr.simp"></a>      <span class="decl_name">expr.simp</span> <span class="decl_args">(t : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(cfg : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/simp_tactic.html#tactic.simp_config">tactic.simp_config</a>
  {max_steps := simp.default_max_steps,
   contextual := bool.ff,
   lift_eq := bool.tt,
   canonize_instances := bool.tt,
   canonize_proofs := bool.ff,
   use_axioms := bool.tt,
   zeta := bool.tt,
   beta := bool.tt,
   eta := bool.tt,
   proj := bool.tt,
   iota := bool.tt,
   iota_eqn := bool.ff,
   constructor_eq := bool.tt,
   single_pass := bool.ff,
   fail_if_unchanged := bool.tt,
   memoize := bool.tt})</span> <span class="decl_args">(discharger : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a>) <a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic.failed">tactic.failed</a>)</span> <span class="decl_args">(no_defaults : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a> bool.ff)</span> <span class="decl_args">(attr_names : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>) list.nil)</span> <span class="decl_args">(hs : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/interactive.html#tactic.simp_arg_type">tactic.simp_arg_type</a>) list.nil)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</div>
<div class="indent"><p>Simplifies the expression <code>t</code> with the specified options.
 The result is <code>(new_e, pr)</code> with the new expression <code>new_e</code> and a proof
 <code>pr : e = new_e</code>.</p>
       </div>
</div><div class="def"><a id="expr.dsimp"></a>      <span class="decl_name">expr.dsimp</span> <span class="decl_args">(t : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(cfg : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/simp_tactic.html#tactic.dsimp_config">tactic.dsimp_config</a>
  {md := tactic.transparency.reducible,
   max_steps := simp.default_max_steps,
   canonize_instances := bool.tt,
   single_pass := bool.ff,
   fail_if_unchanged := bool.tt,
   eta := bool.tt,
   zeta := bool.tt,
   beta := bool.tt,
   proj := bool.tt,
   iota := bool.tt,
   unfold_reducible := bool.ff,
   memoize := bool.tt})</span> <span class="decl_args">(no_defaults : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a> bool.ff)</span> <span class="decl_args">(attr_names : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>) list.nil)</span> <span class="decl_args">(hs : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/interactive.html#tactic.simp_arg_type">tactic.simp_arg_type</a>) list.nil)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Definitionally simplifies the expression <code>t</code> with the specified options.
 The result is the simplified expression.</p>
       </div>
</div><div class="def"><a id="expr.pi_arity_aux"></a>      <span class="decl_name">expr.pi_arity_aux</span> <span class="decl_args">(a : ℕ)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type">ℕ</div>
<div class="indent"><p>Auxilliary definition for <code>expr.pi_arity</code></p>
       </div>
</div><div class="def"><a id="expr.pi_arity"></a>      <span class="decl_name">expr.pi_arity</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type">ℕ</div>
<div class="indent"><p>The arity of a pi-type. Does not perform any reduction of the expression.
 In one application this was ~30 times quicker than <code>tactic.get_pi_arity</code>.</p>
       </div>
</div><div class="def"><a id="expr.binding_names"></a>      <span class="decl_name">expr.binding_names</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>Get the names of the bound variables by a sequence of pis or lambdas.</p>
       </div>
</div><div class="def"><a id="expr.reduce_let"></a>      <span class="decl_name">expr.reduce_let</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>head-reduce a single let expression</p>
       </div>
</div><div class="def"><a id="expr.reduce_lets"></a>      <span class="decl_name">expr.reduce_lets</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>head-reduce all let expressions</p>
       </div>
</div><div class="def"><a id="expr.instantiate_lambdas"></a>      <span class="decl_name">expr.instantiate_lambdas</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Instantiate lambdas in the second argument by expressions from the first.</p>
       </div>
</div><div class="def"><a id="expr.instantiate_lambdas_or_apps"></a>      <span class="decl_name">expr.instantiate_lambdas_or_apps</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>instantiate_lambdas_or_apps es e</code> instantiates lambdas in <code>e</code> by expressions from <code>es</code>.
If the length of <code>es</code> is larger than the number of lambdas in <code>e</code>,
then the term is applied to the remaining terms.
Also reduces head let-expressions in <code>e</code>, including those after instantiating all lambdas.</p>
       </div>
</div><div class="def"><a id="expr.pi_codomain"></a>      <span class="decl_name">expr.pi_codomain</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Get the codomain/target of a pi-type.
 This definition doesn't Instantiate bound variables, and therefore produces a term that is open.</p>
       </div>
</div><div class="def"><a id="expr.pi_binders_aux"></a>      <span class="decl_name">expr.pi_binders_aux</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/meta/expr.html#binder">binder</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/meta/expr.html#binder">binder</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Auxilliary defintion for <code>pi_binders</code>.</p>
       </div>
</div><div class="def"><a id="expr.pi_binders"></a>      <span class="decl_name">expr.pi_binders</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/meta/expr.html#binder">binder</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Get the binders and codomain of a pi-type.
 This definition doesn't Instantiate bound variables, and therefore produces a term that is open.
 The.tactic <code>get_pi_binders</code> in <code>tactic.core</code> does the same, but also instantiates the
 free variables</p>
       </div>
</div><div class="def"><a id="expr.get_app_fn_args_aux"></a>      <span class="decl_name">expr.get_app_fn_args_aux</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Auxilliary defintion for <code>get_app_fn_args</code>.</p>
       </div>
</div><div class="def"><a id="expr.get_app_fn_args"></a>      <span class="decl_name">expr.get_app_fn_args</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>A combination of <code>get_app_fn</code> and <code>get_app_args</code>: lists both the
 function and its arguments of an application</p>
       </div>
</div><div class="def"><a id="expr.drop_pis"></a>      <span class="decl_name">expr.drop_pis</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(a_1 : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>drop_pis es e</code> instantiates the pis in <code>e</code> with the expressions from <code>es</code>.</p>
       </div>
</div><div class="def"><a id="expr.mk_op_lst"></a>      <span class="decl_name">expr.mk_op_lst</span> <span class="decl_args">(op <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#empty">empty</a> : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>mk_op_lst op empty [x1, x2, ...]</code> is defined as <code>op x1 (op x2 ...)</code>.
 Returns <code>empty</code> if the list is empty.</p>
       </div>
</div><div class="def"><a id="expr.mk_and_lst"></a>      <span class="decl_name">expr.mk_and_lst</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>mk_and_lst [x1, x2, ...]</code> is defined as <code>x1 ∧ (x2 ∧ ...)</code>, or <code>true</code> if the list is empty.</p>
       </div>
</div><div class="def"><a id="expr.mk_or_lst"></a>      <span class="decl_name">expr.mk_or_lst</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>mk_or_lst [x1, x2, ...]</code> is defined as <code>x1 ∨ (x2 ∨ ...)</code>, or <code>false</code> if the list is empty.</p>
       </div>
</div><div class="def"><a id="expr.local_binding_info"></a>      <span class="decl_name">expr.local_binding_info</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#binder_info">binder_info</a></div>
<div class="indent"><p><code>local_binding_info e</code> returns the binding info of <code>e</code> if <code>e</code> is a local constant.
Otherwise returns <code>binder_info.default</code>.</p>
       </div>
</div><div class="def"><a id="expr.local_binder_info"></a>      <span class="decl_name">expr.local_binder_info</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#binder_info">binder_info</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="expr.is_default_local"></a>      <span class="decl_name">expr.is_default_local</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p><code>is_default_local e</code> tests whether <code>e</code> is a local constant with binder info
<code>binder_info.default</code></p>
       </div>
</div><div class="def"><a id="environment.in_current_file'"></a>      <span class="decl_name">environment.in_current_file'</span> <span class="decl_args">(env : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(n : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Tests whether a name is declared in the current file. Fixes an error in <code>in_current_file</code>
 which returns <code>tt</code> for the four names <code>quot, quot.mk, quot.lift, quot.ind</code></p>
       </div>
</div><div class="def"><a id="environment.is_structure_like"></a>      <span class="decl_name">environment.is_structure_like</span> <span class="decl_args">(env : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(n : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> (ℕ × <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</div>
<div class="indent"><p>Tests whether <code>n</code> is an inductive type with one constructor without indices.
 If so, returns the number of paramaters and the name of the constructor.
 Otherwise, returns <code>none</code>.</p>
       </div>
</div><div class="def"><a id="environment.is_structure"></a>      <span class="decl_name">environment.is_structure</span> <span class="decl_args">(env : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(n : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Tests whether <code>n</code> is a structure.
 It will first test whether <code>n</code> is structure-like and then test that the first projection is
 defined in the environment and is a projection.</p>
       </div>
</div><div class="def"><a id="environment.get_projections"></a>      <span class="decl_name">environment.get_projections</span> <span class="decl_args">(env : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(n : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</div>
<div class="indent"><p>Get all projections of the structure <code>n</code>. Returns <code>none</code> if <code>n</code> is not structure-like.
 If <code>n</code> is not a structure, but is structure-like, this does not check whether the names
 are existing declarations.</p>
       </div>
</div><div class="def"><a id="environment.is_ginductive'"></a>      <span class="decl_name">environment.is_ginductive'</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(nm : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Tests whether <code>nm</code> is a generalized inductive type that is not a normal inductive type.
 Note that <code>is_ginductive</code> returns <code>tt</code> even on regular inductive types.
 This returns <code>tt</code> if <code>nm</code> is (part of a) mutually defined inductive type or a nested inductive
 type.</p>
       </div>
</div><div class="def"><a id="environment.decl_filter_map"></a>      <span class="decl_name">environment.decl_filter_map</span> <span class="decl_args">{α : Type}</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(f : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a> → <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> α)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> α</div>
<div class="indent"><p>For all declarations <code>d</code> where <code>f d = some x</code> this adds <code>x</code> to the returned list.</p>
       </div>
</div><div class="def"><a id="environment.decl_map"></a>      <span class="decl_name">environment.decl_map</span> <span class="decl_args">{α : Type}</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(f : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a> → α)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> α</div>
<div class="indent"><p>Maps <code>f</code> to all declarations in the environment.</p>
       </div>
</div><div class="def"><a id="environment.get_decls"></a>      <span class="decl_name">environment.get_decls</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p>Lists all declarations in the environment</p>
       </div>
</div><div class="def"><a id="environment.get_trusted_decls"></a>      <span class="decl_name">environment.get_trusted_decls</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p>Lists all trusted (non-meta) declarations in the environment</p>
       </div>
</div><div class="def"><a id="environment.get_decl_names"></a>      <span class="decl_name">environment.get_decl_names</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>Lists the name of all declarations in the environment</p>
       </div>
</div><div class="def"><a id="environment.mfold"></a>      <span class="decl_name">environment.mfold</span> <span class="decl_args">{α : Type}</span> <span class="decl_args">{m : Type → Type}</span> <span class="decl_args">[<a href="https://robertylewis.com/mathlib_docs/core/init/category/monad.html#monad">monad</a> m]</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(x : α)</span> <span class="decl_args">(fn : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a> → α → m α)</span> <span class="decl_args">:</span>       <div class="decl_type">m α</div>
<div class="indent"><p>Fold a monad over all declarations in the environment.</p>
       </div>
</div><div class="def"><a id="environment.mfilter"></a>      <span class="decl_name">environment.mfilter</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(test : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a> → <a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</div>
<div class="indent"><p>Filters all declarations in the environment.</p>
       </div>
</div><div class="def"><a id="environment.is_prefix_of_file"></a>      <span class="decl_name">environment.is_prefix_of_file</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(s : <a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a>)</span> <span class="decl_args">(n : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Checks whether <code>s</code> is a prefix of the file where <code>n</code> is declared.
 This is used to check whether <code>n</code> is declared in mathlib, where <code>s</code> is the mathlib directory.</p>
       </div>
</div><div class="def"><a id="expr.is_eta_expansion_of"></a>      <span class="decl_name">expr.is_eta_expansion_of</span> <span class="decl_args">(args : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(univs : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/level.html#level">level</a>)</span> <span class="decl_args">(l : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>))</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p><code>is_eta_expansion_of args univs l</code> checks whether for all elements <code>(nm, pr)</code> in <code>l</code> we have
 <code>pr = nm.{univs} args</code>.
 Used in <code>is_eta_expansion</code>, where <code>l</code> consists of the projections and the fields of the value we
 want to eta-reduce.</p>
       </div>
</div><div class="def"><a id="expr.is_eta_expansion_test"></a>      <span class="decl_name">expr.is_eta_expansion_test</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>))</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>is_eta_expansion_test l</code> checks whether there is a list of expresions <code>args</code> such that for all
 elements <code>(nm, pr)</code> in <code>l</code> we have <code>pr = nm args</code>. If so, returns the last element of <code>args</code>.
 Used in <code>is_eta_expansion</code>, where <code>l</code> consists of the projections and the fields of the value we
 want to eta-reduce.</p>
       </div>
</div><div class="def"><a id="expr.is_eta_expansion_aux"></a>      <span class="decl_name">expr.is_eta_expansion_aux</span> <span class="decl_args">(val : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(l : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>))</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</div>
<div class="indent"><p><code>is_eta_expansion_aux val l</code> checks whether <code>val</code> can be eta-reduced to an expression <code>e</code>.
 Here <code>l</code> is intended to consists of the projections and the fields of <code>val</code>.
 This tactic calls <code>is_eta_expansion_test l</code>, but first removes all proofs from the list <code>l</code> and
 afterward checks whether the retulting expression <code>e</code> unifies with <code>val</code>.
 This last check is necessary, because <code>val</code> and <code>e</code> might have different types.</p>
       </div>
</div><div class="def"><a id="expr.is_eta_expansion"></a>      <span class="decl_name">expr.is_eta_expansion</span> <span class="decl_args">(val : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</div>
<div class="indent"><p><code>is_eta_expansion val</code> checks whether there is an expression <code>e</code> such that <code>val</code> is the
 eta-expansion of <code>e</code>.
 With eta-expansion we here mean the eta-expansion of a structure, not of a function.
 For example, the eta-expansion of <code>x : α × β</code> is <code>⟨x.1, x.2⟩</code>.
 This assumes that <code>val</code> is a fully-applied application of the constructor of a structure.</p>

<p>This is useful to reduce expressions generated by the notation
   <code>{ field_1 := _, ..other_structure }</code>
 If <code>other_structure</code> is itself a field of the structure, then the elaborator will insert an
 eta-expanded version of <code>other_structure</code>.</p>
       </div>
</div><div class="def"><a id="declaration.update_with_fun"></a>      <span class="decl_name">declaration.update_with_fun</span> <span class="decl_args">(f : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a> → <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(tgt : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(decl : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.in_current_file"></a>      <span class="decl_name">declaration.in_current_file</span> <span class="decl_args">(d : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Checks whether the declaration is declared in the current file.
 This is a simple wrapper around <code>environment.in_current_file'</code>
 Use <code>environment.in_current_file'</code> instead if performance matters.</p>
       </div>
</div><div class="def"><a id="declaration.is_theorem"></a>      <span class="decl_name">declaration.is_theorem</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Checks whether a declaration is a theorem</p>
       </div>
</div><div class="def"><a id="declaration.is_constant"></a>      <span class="decl_name">declaration.is_constant</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Checks whether a declaration is a constant</p>
       </div>
</div><div class="def"><a id="declaration.is_axiom"></a>      <span class="decl_name">declaration.is_axiom</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Checks whether a declaration is a axiom</p>
       </div>
</div><div class="def"><a id="declaration.is_auto_generated"></a>      <span class="decl_name">declaration.is_auto_generated</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(d : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p>Checks whether a declaration is automatically generated in the environment.
 There is no cheap way to check whether a declaration in the namespace of a generalized
 inductive type is automatically generated, so for now we say that all of them are automatically
 generated.</p>
       </div>
</div><div class="def"><a id="declaration.univ_levels"></a>      <span class="decl_name">declaration.univ_levels</span> <span class="decl_args">(d : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/level.html#level">level</a></div>
<div class="indent"><p>Returns the list of universe levels of a declaration.</p>
       </div>
</div></body></html>
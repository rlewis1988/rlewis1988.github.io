<!DOCTYPE html><html lang="en"><head><title>core.init.meta.vm</title><meta charset="UTF-8"><link rel="stylesheet" href="/home/rob/lean/mathlib/scripts/html_out/style.css"></head><body><div class="mod_doc"><p></p>
</div><div class="cnst"><a id="vm_obj"></a>      <h4>vm_obj</h4><code>Type</code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="vm_obj_kind.decidable_eq"></a>      <h4>vm_obj_kind.decidable_eq</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#decidable_eq">decidable_eq</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj_kind">vm_obj_kind</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="cnst"><a id="vm_obj_kind"></a>      <h4>vm_obj_kind</h4><code>Type</code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_obj.kind"></a>      <h4>vm_obj.kind</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj_kind">vm_obj_kind</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_obj.cidx"></a>      <h4>vm_obj.cidx</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → ℕ</code>
<div class="indent"><p>For simple and constructor vm_obj's, it returns the constructor tag/index.
  Return 0 otherwise.</p>
       </div>
</div><div class="cnst"><a id="vm_obj.fn_idx"></a>      <h4>vm_obj.fn_idx</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → ℕ</code>
<div class="indent"><p>For closure vm_obj's, it returns the internal function index.</p>
       </div>
</div><div class="cnst"><a id="vm_obj.fields"></a>      <h4>vm_obj.fields</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#list">list</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a></code>
<div class="indent"><p>For constructor vm<em>obj's, it returns the data stored in the object.
  For closure vm</em>obj's, it returns the local arguments captured by the closure.</p>
       </div>
</div><div class="cnst"><a id="vm_obj.to_nat"></a>      <h4>vm_obj.to_nat</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → ℕ</code>
<div class="indent"><p>For simple and mpz vm_obj's</p>
       </div>
</div><div class="cnst"><a id="vm_obj.to_name"></a>      <h4>vm_obj.to_name</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/name.html#name">name</a></code>
<div class="indent"><p>For name vm<em>obj's, it returns the name wrapped by the vm</em>obj.</p>
       </div>
</div><div class="cnst"><a id="vm_obj.to_level"></a>      <h4>vm_obj.to_level</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/level.html#level">level</a></code>
<div class="indent"><p>For level vm<em>obj's, it returns the universe level wrapped by the vm</em>obj.</p>
       </div>
</div><div class="cnst"><a id="vm_obj.to_expr"></a>      <h4>vm_obj.to_expr</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a></code>
<div class="indent"><p>For expr vm<em>obj's, it returns the expression wrapped by the vm</em>obj.</p>
       </div>
</div><div class="cnst"><a id="vm_obj.to_declaration"></a>      <h4>vm_obj.to_declaration</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/declaration.html#declaration">declaration</a></code>
<div class="indent"><p>For declaration vm<em>obj's, it returns the declaration wrapped by the vm</em>obj.</p>
       </div>
</div><div class="cnst"><a id="vm_obj.to_environment"></a>      <h4>vm_obj.to_environment</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/environment.html#environment">environment</a></code>
<div class="indent"><p>For environment vm<em>obj's, it returns the environment wrapped by the vm</em>obj.</p>
       </div>
</div><div class="cnst"><a id="vm_obj.to_tactic_state"></a>      <h4>vm_obj.to_tactic_state</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/tactic.html#tactic_state">tactic_state</a></code>
<div class="indent"><p>For tactic<em>state vm</em>obj's, it returns the tactic<em>state object wrapped by the vm</em>obj.</p>
       </div>
</div><div class="cnst"><a id="vm_obj.to_format"></a>      <h4>vm_obj.to_format</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/format.html#format">format</a></code>
<div class="indent"><p>For format vm<em>obj's, it returns the format object wrapped by the vm</em>obj.</p>
       </div>
</div><div class="cnst"><a id="vm_decl"></a>      <h4>vm_decl</h4><code>Type</code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_decl_kind"></a>      <h4>vm_decl_kind</h4><code>Type</code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_local_info"></a>      <h4>vm_local_info</h4><code>Type</code>
<div class="indent"><p>Information for local variables and arguments on the VM stack.
  Remark: type is only available if it is a closed term at compilation time.</p>
       </div>
</div><div class="cnst"><a id="vm_decl.kind"></a>      <h4>vm_decl.kind</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_decl">vm_decl</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_decl_kind">vm_decl_kind</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_decl.to_name"></a>      <h4>vm_decl.to_name</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_decl">vm_decl</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/name.html#name">name</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_decl.idx"></a>      <h4>vm_decl.idx</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_decl">vm_decl</a> → ℕ</code>
<div class="indent"><p>Internal function index associated with the given VM declaration.</p>
       </div>
</div><div class="cnst"><a id="vm_decl.arity"></a>      <h4>vm_decl.arity</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_decl">vm_decl</a> → ℕ</code>
<div class="indent"><p>Number of arguments needed to execute the given VM declaration.</p>
       </div>
</div><div class="cnst"><a id="vm_decl.pos"></a>      <h4>vm_decl.pos</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_decl">vm_decl</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#option">option</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#pos">pos</a></code>
<div class="indent"><p>Return source position if available</p>
       </div>
</div><div class="cnst"><a id="vm_decl.olean"></a>      <h4>vm_decl.olean</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_decl">vm_decl</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#option">option</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/data/string/basic.html#string">string</a></code>
<div class="indent"><p>Return .olean file where the given VM declaration was imported from.</p>
       </div>
</div><div class="cnst"><a id="vm_decl.args_info"></a>      <h4>vm_decl.args_info</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_decl">vm_decl</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#list">list</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_local_info">vm_local_info</a></code>
<div class="indent"><p>Return names .olean file where the given VM declaration was imported from.</p>
       </div>
</div><div class="cnst"><a id="vm_core"></a>      <h4>vm_core</h4><code>Type → Type</code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_core.map"></a>      <h4>vm_core.map</h4><code>Π {α β : Type}, (α → β) → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_core">vm_core</a> α → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_core">vm_core</a> β</code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_core.ret"></a>      <h4>vm_core.ret</h4><code>Π {α : Type}, α → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_core">vm_core</a> α</code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_core.bind"></a>      <h4>vm_core.bind</h4><code>Π {α β : Type}, <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_core">vm_core</a> α → (α → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_core">vm_core</a> β) → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_core">vm_core</a> β</code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="vm_core.monad"></a>      <h4>vm_core.monad</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/category/monad.html#monad">monad</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_core">vm_core</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="vm"></a>      <h4>vm</h4><code>Type → Type</code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm.get_env"></a>      <h4>vm.get_env</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/environment.html#environment">environment</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm.get_decl"></a>      <h4>vm.get_decl</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/name.html#name">name</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_decl">vm_decl</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm.get_options"></a>      <h4>vm.get_options</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/options.html#options">options</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm.stack_size"></a>      <h4>vm.stack_size</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> ℕ</code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm.stack_obj"></a>      <h4>vm.stack_obj</h4><code>ℕ → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a></code>
<div class="indent"><p>Return the vm<em>obj stored at the given position on the execution stack.
  It fails if position &gt;= vm.stack</em>size</p>
       </div>
</div><div class="cnst"><a id="vm.stack_obj_info"></a>      <h4>vm.stack_obj_info</h4><code>ℕ → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/name.html#name">name</a> × <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#option">option</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a>)</code>
<div class="indent"><p>Return (name, type) for the object at the given position on the execution stack.
  It fails if position &gt;= vm.stack<em>size.
  The name is anonymous if vm</em>obj is a transient value created by the compiler.
  Type information is only recorded if the type is a closed term at compilation time.</p>
       </div>
</div><div class="cnst"><a id="vm.pp_stack_obj"></a>      <h4>vm.pp_stack_obj</h4><code>ℕ → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/format.html#format">format</a></code>
<div class="indent"><p>Pretty print the vm_obj at the given position on the execution stack.</p>
       </div>
</div><div class="cnst"><a id="vm.pp_expr"></a>      <h4>vm.pp_expr</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/format.html#format">format</a></code>
<div class="indent"><p>Pretty print the given expression.</p>
       </div>
</div><div class="cnst"><a id="vm.call_stack_size"></a>      <h4>vm.call_stack_size</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> ℕ</code>
<div class="indent"><p>Number of frames on the call stack.</p>
       </div>
</div><div class="cnst"><a id="vm.call_stack_fn"></a>      <h4>vm.call_stack_fn</h4><code>ℕ → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/name.html#name">name</a></code>
<div class="indent"><p>Return the function name at the given stack frame.
  Action fails if position &gt;= vm.call<em>stack</em>size.</p>
       </div>
</div><div class="cnst"><a id="vm.call_stack_var_range"></a>      <h4>vm.call_stack_var_range</h4><code>ℕ → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> (ℕ × ℕ)</code>
<div class="indent"><p>Return the range [start, end) for the given stack frame.
  Action fails if position &gt;= vm.call<em>stack</em>size.
  The values start and end correspond to positions at the execution stack.
  We have that 0 &lt;= start &lt; end &lt;= vm.stack_size</p>
       </div>
</div><div class="cnst"><a id="vm.curr_fn"></a>      <h4>vm.curr_fn</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/name.html#name">name</a></code>
<div class="indent"><p>Return the name of the function on top of the call stack.</p>
       </div>
</div><div class="cnst"><a id="vm.bp"></a>      <h4>vm.bp</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> ℕ</code>
<div class="indent"><p>Return the base stack pointer for the frame on top of the call stack.</p>
       </div>
</div><div class="cnst"><a id="vm.pc"></a>      <h4>vm.pc</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> ℕ</code>
<div class="indent"><p>Return the program counter.</p>
       </div>
</div><div class="cnst"><a id="vm.obj_to_string"></a>      <h4>vm.obj_to_string</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm_obj">vm_obj</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/data/string/basic.html#string">string</a></code>
<div class="indent"><p>Convert the given vm_obj into a string</p>
       </div>
</div><div class="cnst"><a id="vm.put_str"></a>      <h4>vm.put_str</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/data/string/basic.html#string">string</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#unit">unit</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm.get_line"></a>      <h4>vm.get_line</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/data/string/basic.html#string">string</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm.eof"></a>      <h4>vm.eof</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#bool">bool</a></code>
<div class="indent"><p>Return tt if end of the input stream has been reached.
  For example, this can happen if the user presses Ctrl-D</p>
       </div>
</div><div class="cnst"><a id="vm.get_attribute"></a>      <h4>vm.get_attribute</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/name.html#name">name</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#list">list</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/name.html#name">name</a>)</code>
<div class="indent"><p>Return the list of declarations tagged with the given attribute.</p>
       </div>
</div><div class="def"><a id="vm.trace"></a>      <h4>vm.trace</h4><code>Π {α : Type} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/format.html#has_to_format">has_to_format</a> α], α → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/vm.html#vm">vm</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#unit">unit</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="vm_monitor"></a>      <h4>vm_monitor</h4><code>Type → Type</code>
<div class="indent"><p>A Lean VM monitor. Monitors are registered using the [vm_monitor] attribute.</p>

<p>If option 'debugger' is true, then the VM will initialize the vm_monitor state using the
   'init' field, and will invoke the function 'step' before each instruction is invoked.</p>
       </div>
</div></body></html>
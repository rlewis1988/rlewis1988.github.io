<!DOCTYPE html><html lang="en"><head><title>core.init.meta.smt.rsimp</title><meta charset="UTF-8"><link rel="stylesheet" href="https://robertylewis.com/mathlib_docs/style.css"></head><body><div class="nav"><a href="https://robertylewis.com/mathlib_docs//index.html">root</a>/<a href="https://robertylewis.com/mathlib_docs/core/index.html">core</a>/<a href="https://robertylewis.com/mathlib_docs/core/init/index.html">init</a>/<a href="https://robertylewis.com/mathlib_docs/core/init/meta/index.html">meta</a>/<a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/index.html">smt</a>/<a href="rsimp.html">rsimp</a></div><div class="mod_doc"><p></p>
</div><div class="def"><a id="mk_hinst_lemma_attr_from_simp_attr"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L31">mk_hinst_lemma_attr_from_simp_attr</a></span> <span class="decl_args">(attr_decl_name attr_name simp_attr_name ex_attr_name : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a></div>
<div class="indent"><p>Create a rsimp attribute named <code>attr_name</code>, the attribute declaration is named <code>attr_decl_name</code>.
   The cached hinst_lemmas structure is built using the lemmas marked with simp attribute <code>simp_attr_name</code>,
   but <em>not</em> marked with <code>ex_attr_name</code>.</p>

<p>We say <code>ex_attr_name</code> is the "exception set". It is useful for excluding lemmas in <code>simp_attr_name</code>
   which are not good or redundant for ematching.</p>
       </div>
</div><div class="def"><a id="no_rsimp"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L49">no_rsimp</a></span>  <span class="decl_args">:</span>       <div class="decl_type">(<a href="https://robertylewis.com/mathlib_docs/core/init/meta/attribute.html#user_attribute">user_attribute</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/rb_map.html#name_set">name_set</a>)</div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="rsimp_attr"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L50">rsimp_attr</a></span>  <span class="decl_args">:</span>       <div class="decl_type">(<a href="https://robertylewis.com/mathlib_docs/core/init/meta/attribute.html#user_attribute">user_attribute</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/ematch.html#hinst_lemmas">hinst_lemmas</a>)</div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="rsimp.is_value_like"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L62">rsimp.is_value_like</a></span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="rsimp.explicit_size"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L77">rsimp.explicit_size</a></span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> ℕ</div>
<div class="indent"><p>Return the size of term by considering only explicit arguments.</p>
       </div>
</div><div class="def"><a id="rsimp.choose"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L85">rsimp.choose</a></span> <span class="decl_args">(ccs : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/congruence_closure.html#cc_state">cc_state</a>)</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p>Choose smallest element (with respect to explicit_size) in <code>e</code>s equivalence class.</p>
       </div>
</div><div class="def"><a id="rsimp.repr_map"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L96">rsimp.repr_map</a></span>  <span class="decl_args">:</span>       <div class="decl_type">Type</div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="rsimp.mk_repr_map"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L97">rsimp.mk_repr_map</a></span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr_map">expr_map</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="rsimp.to_repr_map"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L99">rsimp.to_repr_map</a></span> <span class="decl_args">(ccs : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/congruence_closure.html#cc_state">cc_state</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/rsimp.html#rsimp.repr_map">rsimp.repr_map</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="rsimp.rsimplify"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L102">rsimp.rsimplify</a></span> <span class="decl_args">(ccs : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/congruence_closure.html#cc_state">cc_state</a>)</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(m : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/rsimp.html#rsimp.repr_map">rsimp.repr_map</a>) option.none)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</div>
<div class="indent"><p></p>
       </div>
</div><div class="cnst"><a id="rsimp.config"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L116">rsimp.config</a></span>  <span class="decl_args">:</span>       <div class="decl_type">Type</div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="rsimp.collect_implied_eqs"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L122">rsimp.collect_implied_eqs</a></span> <span class="decl_args">(cfg : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/rsimp.html#rsimp.config">rsimp.config</a> {attr_name := name.mk_string "rsimp_attr" name.anonymous, max_rounds := 8})</span> <span class="decl_args">(extra : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/ematch.html#hinst_lemmas">hinst_lemmas</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/ematch.html#hinst_lemmas.mk">hinst_lemmas.mk</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/congruence_closure.html#cc_state">cc_state</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="rsimp.rsimplify_goal"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L132">rsimp.rsimplify_goal</a></span> <span class="decl_args">(ccs : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/congruence_closure.html#cc_state">cc_state</a>)</span> <span class="decl_args">(m : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/rsimp.html#rsimp.repr_map">rsimp.repr_map</a>) option.none)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="rsimp.rsimplify_at"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L137">rsimp.rsimplify_at</a></span> <span class="decl_args">(ccs : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/congruence_closure.html#cc_state">cc_state</a>)</span> <span class="decl_args">(h : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(m : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/rsimp.html#rsimp.repr_map">rsimp.repr_map</a>) option.none)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.rsimp"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L150">tactic.rsimp</a></span> <span class="decl_args">(cfg : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/rsimp.html#rsimp.config">rsimp.config</a> {attr_name := name.mk_string "rsimp_attr" name.anonymous, max_rounds := 8})</span> <span class="decl_args">(extra : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/ematch.html#hinst_lemmas">hinst_lemmas</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/ematch.html#hinst_lemmas.mk">hinst_lemmas.mk</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.rsimp_at"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L154">tactic.rsimp_at</a></span> <span class="decl_args">(h : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(cfg : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/rsimp.html#rsimp.config">rsimp.config</a> {attr_name := name.mk_string "rsimp_attr" name.anonymous, max_rounds := 8})</span> <span class="decl_args">(extra : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#opt_param">opt_param</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/ematch.html#hinst_lemmas">hinst_lemmas</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/smt/ematch.html#hinst_lemmas.mk">hinst_lemmas.mk</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.interactive.rsimp"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/lean/blob/80c1b4d67eec24f1d1e5b4b3ed7082c27851271d/library/init/meta/smt/rsimp.lean#L161">tactic.interactive.rsimp</a></span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a></div>
<div class="indent"><p></p>
       </div>
</div></body></html>
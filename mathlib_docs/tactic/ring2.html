<!DOCTYPE html><html lang="en"><head><title>tactic.ring2</title><meta charset="UTF-8"><link rel="stylesheet" href="/home/rob/lean/mathlib/scripts/html_out/style.css"></head><body><div class="mod_doc"><h1>ring2</h1>

<p>An experimental variant on the <code>ring</code> tactic that uses computational
reflection instead of proof generation. Useful for kernel benchmarking.</p>
</div><div class="def"><a id="tree.reflect'"></a>      <h4>tree.reflect'</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/level.html#level">level</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a></code>
<div class="indent"><p><code>(reflect' t u α)</code> quasiquotes a tree <code>(t: tree expr)</code> of quoted
values of type <code>α</code> at level <code>u</code> into an <code>expr</code> which reifies to a <code>tree α</code>
containing the reifications of the <code>expr</code>s from the original <code>t</code>.</p>
       </div>
</div><div class="def"><a id="tree.get_or_zero"></a>      <h4>tree.get_or_zero</h4><code>Π {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#has_zero">has_zero</a> α], <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α → <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#pos_num">pos_num</a> → α</code>
<div class="indent"><p>Returns an element indexed by <code>n</code>, or zero if <code>n</code> isn't a valid index.
See <code>tree.get</code>.</p>
       </div>
</div><div class="def"><a id="tactic.ring2.csring_expr.has_reflect"></a>      <h4>tactic.ring2.csring_expr.has_reflect</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/has_reflect.html#has_reflect">has_reflect</a> <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr">tactic.ring2.csring_expr</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="cnst"><a id="tactic.ring2.csring_expr"></a>      <h4>tactic.ring2.csring_expr</h4><code>Type</code>
<div class="indent"><p>A reflected/meta representation of an expression in a commutative
semiring. This representation is a direct translation of such
expressions - see <code>horner_expr</code> for a normal form.</p>
       </div>
</div><div class="def"><a id="tactic.ring2.csring_expr.eval"></a>      <h4>tactic.ring2.csring_expr.eval</h4><code>Π {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α], <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr">tactic.ring2.csring_expr</a> → α</code>
<div class="indent"><p>Evaluates a reflected <code>csring_expr</code> into an element of the
original <code>comm_semiring</code> type <code>α</code>, retrieving opaque elements
(atoms) from the tree <code>t</code>.</p>
       </div>
</div><div class="cnst"><a id="tactic.ring2.horner_expr"></a>      <h4>tactic.ring2.horner_expr</h4><code>Type</code>
<div class="indent"><p>An efficient representation of expressions in a commutative
semiring using the sparse Horner normal form. This type admits
non-optimal instantiations (e.g. <code>P</code> can be represented as <code>P+0+0</code>),
so to get good performance out of it, care must be taken to maintain
an optimal, <em>canonical</em> form.</p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.decidable_eq"></a>      <h4>tactic.ring2.horner_expr.decidable_eq</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#decidable_eq">decidable_eq</a> <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="tactic.ring2.horner_expr.is_cs"></a>      <h4>tactic.ring2.horner_expr.is_cs</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → Prop</code>
<div class="indent"><p>True iff the <code>horner_expr</code> argument is a valid <code>csring_expr</code>.
For that to be the case, all its constants must be non-negative.</p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.has_zero"></a>      <h4>tactic.ring2.horner_expr.has_zero</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#has_zero">has_zero</a> <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="tactic.ring2.horner_expr.has_one"></a>      <h4>tactic.ring2.horner_expr.has_one</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#has_one">has_one</a> <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="tactic.ring2.horner_expr.atom"></a>      <h4>tactic.ring2.horner_expr.atom</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#pos_num">pos_num</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p>Represent a <code>csring_expr.atom</code> in Horner form.</p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.to_string"></a>      <h4>tactic.ring2.horner_expr.to_string</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/data/string/basic.html#string">string</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.has_to_string"></a>      <h4>tactic.ring2.horner_expr.has_to_string</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/data/to_string.html#has_to_string">has_to_string</a> <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="tactic.ring2.horner_expr.horner'"></a>      <h4>tactic.ring2.horner_expr.horner'</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#pos_num">pos_num</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num">num</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p>Alternative constructor for (horner a x n b) which maintains canonical
form by simplifying special cases of <code>a</code>.</p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.add_const"></a>      <h4>tactic.ring2.horner_expr.add_const</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#znum">znum</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.add_aux"></a>      <h4>tactic.ring2.horner_expr.add_aux</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> →
(<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>) →
<a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#pos_num">pos_num</a> →
<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> →
<a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num">num</a> →
<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>) → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.add"></a>      <h4>tactic.ring2.horner_expr.add</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.neg"></a>      <h4>tactic.ring2.horner_expr.neg</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.mul_const"></a>      <h4>tactic.ring2.horner_expr.mul_const</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#znum">znum</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.mul_aux"></a>      <h4>tactic.ring2.horner_expr.mul_aux</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> →
<a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#pos_num">pos_num</a> →
<a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num">num</a> →
<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> →
(<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>) →
(<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>) → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.mul"></a>      <h4>tactic.ring2.horner_expr.mul</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.has_add"></a>      <h4>tactic.ring2.horner_expr.has_add</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#has_add">has_add</a> <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="tactic.ring2.horner_expr.has_neg"></a>      <h4>tactic.ring2.horner_expr.has_neg</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#has_neg">has_neg</a> <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="tactic.ring2.horner_expr.has_mul"></a>      <h4>tactic.ring2.horner_expr.has_mul</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#has_mul">has_mul</a> <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       Attributes: instance</div>
</div><div class="def"><a id="tactic.ring2.horner_expr.pow"></a>      <h4>tactic.ring2.horner_expr.pow</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num">num</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.inv"></a>      <h4>tactic.ring2.horner_expr.inv</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.of_csexpr"></a>      <h4>tactic.ring2.horner_expr.of_csexpr</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr">tactic.ring2.csring_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a></code>
<div class="indent"><p>Brings expressions into Horner normal form.</p>
       </div>
</div><div class="def"><a id="tactic.ring2.horner_expr.cseval"></a>      <h4>tactic.ring2.horner_expr.cseval</h4><code>Π {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α], <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a> → α</code>
<div class="indent"><p>Evaluates a reflected <code>horner_expr</code> - see <code>csring_expr.eval</code>.</p>
       </div>
</div><div class="thm"><a id="tactic.ring2.horner_expr.cseval_atom"></a>      <h4>tactic.ring2.horner_expr.cseval_atom</h4><code>∀ {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α] (t : <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α) (n : <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#pos_num">pos_num</a>),
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.atom">tactic.ring2.horner_expr.atom</a> n) ∧
    <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.atom">tactic.ring2.horner_expr.atom</a> n) = <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tree.get_or_zero">tree.get_or_zero</a> t n</code>
<div class="indent"><p></p>
       </div>
</div><div class="thm"><a id="tactic.ring2.horner_expr.cseval_add_const"></a>      <h4>tactic.ring2.horner_expr.cseval_add_const</h4><code>∀ {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α] (t : <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α) (k : <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num">num</a>) {e : <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>},
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> e →
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.add_const">tactic.ring2.horner_expr.add_const</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num.to_znum">num.to_znum</a> k) e) ∧
    <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.add_const">tactic.ring2.horner_expr.add_const</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num.to_znum">num.to_znum</a> k) e) =
      ↑k + <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t e</code>
<div class="indent"><p></p>
       </div>
</div><div class="thm"><a id="tactic.ring2.horner_expr.cseval_horner'"></a>      <h4>tactic.ring2.horner_expr.cseval_horner'</h4><code>∀ {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α] (t : <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α) (a : <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>) (x : <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#pos_num">pos_num</a>) (n : <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num">num</a>)
(b : <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>),
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> a →
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> b →
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.horner'">tactic.ring2.horner_expr.horner'</a> a x n b) ∧
    <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.horner'">tactic.ring2.horner_expr.horner'</a> a x n b) =
      <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring.html#tactic.ring.horner">tactic.ring.horner</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t a) (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tree.get_or_zero">tree.get_or_zero</a> t x) ↑n
        (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t b)</code>
<div class="indent"><p></p>
       </div>
</div><div class="thm"><a id="tactic.ring2.horner_expr.cseval_add"></a>      <h4>tactic.ring2.horner_expr.cseval_add</h4><code>∀ {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α] (t : <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α) {e₁ e₂ : <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>},
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> e₁ →
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> e₂ →
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.add">tactic.ring2.horner_expr.add</a> e₁ e₂) ∧
    <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.add">tactic.ring2.horner_expr.add</a> e₁ e₂) =
      <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t e₁ + <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t e₂</code>
<div class="indent"><p></p>
       </div>
</div><div class="thm"><a id="tactic.ring2.horner_expr.cseval_mul_const"></a>      <h4>tactic.ring2.horner_expr.cseval_mul_const</h4><code>∀ {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α] (t : <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α) (k : <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num">num</a>) {e : <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>},
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> e →
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.mul_const">tactic.ring2.horner_expr.mul_const</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num.to_znum">num.to_znum</a> k) e) ∧
    <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.mul_const">tactic.ring2.horner_expr.mul_const</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num.to_znum">num.to_znum</a> k) e) =
      <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t e * ↑k</code>
<div class="indent"><p></p>
       </div>
</div><div class="thm"><a id="tactic.ring2.horner_expr.cseval_mul"></a>      <h4>tactic.ring2.horner_expr.cseval_mul</h4><code>∀ {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α] (t : <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α) {e₁ e₂ : <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>},
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> e₁ →
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> e₂ →
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.mul">tactic.ring2.horner_expr.mul</a> e₁ e₂) ∧
    <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.mul">tactic.ring2.horner_expr.mul</a> e₁ e₂) =
      <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t e₁ * <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t e₂</code>
<div class="indent"><p></p>
       </div>
</div><div class="thm"><a id="tactic.ring2.horner_expr.cseval_pow"></a>      <h4>tactic.ring2.horner_expr.cseval_pow</h4><code>∀ {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α] (t : <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α) {x : <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr">tactic.ring2.horner_expr</a>},
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> x →
  ∀ (n : <a href="/home/rob/lean/mathlib/scripts/html_out/data/num/basic.html#num">num</a>),
    <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.pow">tactic.ring2.horner_expr.pow</a> x n) ∧
      <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.pow">tactic.ring2.horner_expr.pow</a> x n) = <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t x ^ ↑n</code>
<div class="indent"><p></p>
       </div>
</div><div class="thm"><a id="tactic.ring2.horner_expr.cseval_of_csexpr"></a>      <h4>tactic.ring2.horner_expr.cseval_of_csexpr</h4><code>∀ {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α] (t : <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α) (r : <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr">tactic.ring2.csring_expr</a>),
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.is_cs">tactic.ring2.horner_expr.is_cs</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.of_csexpr">tactic.ring2.horner_expr.of_csexpr</a> r) ∧
    <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.cseval">tactic.ring2.horner_expr.cseval</a> t (<a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.of_csexpr">tactic.ring2.horner_expr.of_csexpr</a> r) = <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr.eval">tactic.ring2.csring_expr.eval</a> t r</code>
<div class="indent"><p>For any given tree <code>t</code> of atoms and any reflected expression <code>r</code>,
the Horner form of <code>r</code> is a valid csring expression, and under <code>t</code>,
the Horner form evaluates to the same thing as <code>r</code>.</p>
       </div>
</div><div class="thm"><a id="tactic.ring2.correctness"></a>      <h4>tactic.ring2.correctness</h4><code>∀ {α : Type u_1} [_inst_1 : <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/algebra/ring.html#comm_semiring">comm_semiring</a> α] (t : <a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> α) (r₁ r₂ : <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr">tactic.ring2.csring_expr</a>),
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.of_csexpr">tactic.ring2.horner_expr.of_csexpr</a> r₁ = <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.horner_expr.of_csexpr">tactic.ring2.horner_expr.of_csexpr</a> r₂ →
  <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr.eval">tactic.ring2.csring_expr.eval</a> t r₁ = <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr.eval">tactic.ring2.csring_expr.eval</a> t r₂</code>
<div class="indent"><p>The main proof-by-reflection theorem. Given reflected csring expressions
<code>r₁</code> and <code>r₂</code> plus a storage <code>t</code> of atoms, if both expressions go to the
same Horner normal form, then the original non-reflected expressions are
equal. <code>H</code> follows from kernel reduction and is therefore <code>rfl</code>.</p>
       </div>
</div><div class="def"><a id="tactic.ring2.reflect_expr"></a>      <h4>tactic.ring2.reflect_expr</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr">tactic.ring2.csring_expr</a> × <a href="/home/rob/lean/mathlib/scripts/html_out/core/data/dlist.html#dlist">dlist</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a></code>
<div class="indent"><p>Reflects a csring expression into a <code>csring_expr</code>, together
with a dlist of atoms, i.e. opaque variables over which the
expression is a polynomial.</p>
       </div>
</div><div class="def"><a id="tactic.ring2.csring_expr.replace"></a>      <h4>tactic.ring2.csring_expr.replace</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/data/tree.html#tree">tree</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr">tactic.ring2.csring_expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/category/state.html#state_t">state_t</a> (<a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#list">list</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a>) <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#option">option</a> <a href="/home/rob/lean/mathlib/scripts/html_out/tactic/ring2.html#tactic.ring2.csring_expr">tactic.ring2.csring_expr</a></code>
<div class="indent"><p>In the output of <code>reflect_expr</code>, <code>atom</code>s are initialized with incorrect indices.
The indices cannot be computed until the whole tree is built, so another pass over
the expressions is needed - this is what <code>replace</code> does. The computation (expressed
in the state monad) fixes up <code>atom</code>s to match their positions in the atom tree.
The initial state is a list of all atom occurrences in the goal, left-to-right.</p>
       </div>
</div><div class="def"><a id="tactic.interactive.ring2"></a>      <h4>tactic.interactive.ring2</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/tactic.html#tactic">tactic</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#unit">unit</a></code>
<div class="indent"><p>Tactic for solving equations in the language of rings.
 This variant on the <code>ring</code> tactic uses kernel computation instead
 of proof generation.</p>
       </div>
</div><div class="def"><a id="conv.interactive.ring2"></a>      <h4>conv.interactive.ring2</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/converter/conv.html#conv">conv</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#unit">unit</a></code>
<div class="indent"><p></p>
       </div>
</div></body></html>
<!DOCTYPE html><html lang="en"><head><title>data.rat.meta_defs</title><meta charset="UTF-8"><link rel="stylesheet" href="https://robertylewis.com/mathlib_docs/style.css"></head><body><div class="nav"><div class="title">mathlib API docs</div><a href="https://robertylewis.com/mathlib_docs/index.html">root</a>/<br><a href="https://robertylewis.com/mathlib_docs/data/index.html">data</a>/<br><a href="https://robertylewis.com/mathlib_docs/data/rat/index.html">rat</a>/<br><a href="meta_defs.html">meta_defs</a>      <br><br><a href="https://github.com/leanprover-community/mathlib/blob/lean-3.4.2/src/data/rat/meta_defs.lean">View file source</a></div><div class="mod_doc"><h1>Meta operations on ℚ</h1>

<p>This file defines functions for dealing with rational numbers as expressions.</p>

<p>They are not defined earlier in the hierarchy, in the <code>tactic</code> or <code>meta</code> folders, since we do not
want to import <code>data.rat.basic</code> there.</p>

<h2>Main definitions</h2>

<ul>
<li><code>rat.mk_numeral</code> embeds a rational <code>q</code> as a numeral expression into a type supporting the needed
operations. It does not need a tactic state.</li>
<li><code>rat.reflect</code> specializes <code>rat.mk_numeral</code> to <code>ℚ</code>.</li>
<li><p><code>expr.of_rat</code> behaves like <code>rat.mk_numeral</code>, but uses the tactic state to infer the needed
structure on the target type.</p></li>
<li><p><code>expr.to_rat</code> evaluates a normal numeral expression as a rat.</p></li>
<li><code>expr.eval_rat</code> evaluates a numeral expression with arithmetic operations as a rat.</li>
</ul>
</div><div class="def"><a id="rat.mk_numeral"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/mathlib/blob/lean-3.4.2/src/data/rat/meta_defs.lean#L38">rat.mk_numeral</a></span> <span class="decl_args">(type <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_zero">has_zero</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_one">has_one</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_add">has_add</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_neg">has_neg</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#has_div">has_div</a> : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(a : ℚ)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>rat.mk_numeral q</code> embeds <code>q</code> as a numeral expression inside a type with 0, 1, +, -, and /</p>

<p><code>type</code>: an expression representing the target type. This must live in Type 0.
<code>has_zero</code>, <code>has_one</code>, <code>has_add</code>: expressions of the type <code>has_zero %%type</code>, etc.</p>

<p>This function is similar to <code>expr.of_rat</code> but takes more hypotheses and is not tactic valued.</p>
       

</div>
</div><div class="def"><a id="rat.reflect"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/mathlib/blob/lean-3.4.2/src/data/rat/meta_defs.lean#L46">rat.reflect</a></span> <span class="decl_args">(a : ℚ)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>rat.reflect q</code> represents the rational number <code>q</code> as a numeral expression of type <code>ℚ</code>.</p>
       

</div>
</div><div class="def"><a id="rat.has_reflect"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/mathlib/blob/lean-3.4.2/src/data/rat/meta_defs.lean#L53">rat.has_reflect</a></span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/has_reflect.html#has_reflect">has_reflect</a> ℚ</div>
<div class="indent"><p></p>
       

Attributes: instance</div>
</div><div class="def"><a id="expr.to_nonneg_rat"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/mathlib/blob/lean-3.4.2/src/data/rat/meta_defs.lean#L58">expr.to_nonneg_rat</a></span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> ℚ</div>
<div class="indent"><p>Evaluates an expression as a rational number,
if that expression represents a numeral or the quotient of two numerals.</p>
       

</div>
</div><div class="def"><a id="expr.to_rat"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/mathlib/blob/lean-3.4.2/src/data/rat/meta_defs.lean#L65">expr.to_rat</a></span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> ℚ</div>
<div class="indent"><p>Evaluates an expression as a rational number,
if that expression represents a numeral, the quotient of two numerals,
the negation of a numeral, or the negation of the quotient of two numerals.</p>
       

</div>
</div><div class="def"><a id="expr.eval_rat"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/mathlib/blob/lean-3.4.2/src/data/rat/meta_defs.lean#L71">expr.eval_rat</a></span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> ℚ</div>
<div class="indent"><p>Evaluates an expression into a rational number, if that expression is built up from
 numerals, +, -, *, /, ⁻¹</p>
       

</div>
</div><div class="def"><a id="expr.of_rat"></a>      <span class="decl_name"><a href="https://github.com/leanprover-community/mathlib/blob/lean-3.4.2/src/data/rat/meta_defs.lean#L88">expr.of_rat</a></span> <span class="decl_args">(α : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">(a : ℚ)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a></div>
<div class="indent"><p><code>expr.of_rat α q</code> embeds <code>q</code> as a numeral expression inside the type <code>α</code>.
Lean will try to infer the correct type classes on <code>α</code>, and the tactic will fail if it cannot.
This function is similar to <code>rat.mk_numeral</code> but it takes fewer hypotheses and is tactic valued.</p>
       

</div>
</div></body></html>
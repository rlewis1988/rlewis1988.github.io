<html><head><title>data.rat.meta_defs</title><link rel="stylesheet" href="https://robertylewis.com/mathlib_docs/style.css"></head><body><div class="mod_doc"><h1>Meta operations on ℚ</h1>

<p>This file defines functions for dealing with rational numbers as expressions.</p>

<p>They are not defined earlier in the hierarchy, in the <code>tactic</code> or <code>meta</code> folders, since we do not
want to import <code>data.rat.basic</code> there.</p>

<h2>Main definitions</h2>

<ul>
<li><code>rat.mk_numeral</code> embeds a rational <code>q</code> as a numeral expression into a type supporting the needed
operations. It does not need a tactic state.</li>
<li><code>rat.reflect</code> specializes <code>rat.mk_numeral</code> to <code>ℚ</code>.</li>
<li><p><code>expr.of_rat</code> behaves like <code>rat.mk_numeral</code>, but uses the tactic state to infer the needed
structure on the target type.</p></li>
<li><p><code>expr.to_rat</code> evaluates a normal numeral expression as a rat.</p></li>
<li><code>expr.eval_rat</code> evaluates a numeral expression with arithmetic operations as a rat.</li>
</ul>
</div><div class="entry"><a id="rat.mk_numeral">      <h4>rat.mk_numeral</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → ℚ → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a></code>
<div class="indent"><p><p><code>rat.mk_numeral q</code> embeds <code>q</code> as a numeral expression inside a type with 0, 1, +, -, and /</p>

<p><code>type</code>: an expression representing the target type. This must live in Type 0.
<code>has_zero</code>, <code>has_one</code>, <code>has_add</code>: expressions of the type <code>has_zero %%type</code>, etc.</p>

<p>This function is similar to <code>expr.of_rat</code> but takes more hypotheses and is not tactic valued.</p>
</p>       </div>
</div><div class="entry"><a id="rat.reflect">      <h4>rat.reflect</h4><code>ℚ → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a></code>
<div class="indent"><p><p><code>rat.reflect q</code> represents the rational number <code>q</code> as a numeral expression of type <code>ℚ</code>.</p>
</p>       </div>
</div><div class="entry"><a id="rat.has_reflect">      <h4>rat.has_reflect</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/has_reflect.html#has_reflect">has_reflect</a> ℚ</code>
<div class="indent"><p><p></p>
</p>       Attributes: instance</div>
</div><div class="entry"><a id="expr.to_nonneg_rat">      <h4>expr.to_nonneg_rat</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#option">option</a> ℚ</code>
<div class="indent"><p><p>Evaluates an expression as a rational number,
if that expression represents a numeral or the quotient of two numerals.</p>
</p>       </div>
</div><div class="entry"><a id="expr.to_rat">      <h4>expr.to_rat</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#option">option</a> ℚ</code>
<div class="indent"><p><p>Evaluates an expression as a rational number,
if that expression represents a numeral, the quotient of two numerals,
the negation of a numeral, or the negation of the quotient of two numerals.</p>
</p>       </div>
</div><div class="entry"><a id="expr.eval_rat">      <h4>expr.eval_rat</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/core.html#option">option</a> ℚ</code>
<div class="indent"><p><p>Evaluates an expression into a rational number, if that expression is built up from
 numerals, +, -, *, /, ⁻¹</p>
</p>       </div>
</div><div class="entry"><a id="expr.of_rat">      <h4>expr.of_rat</h4><code><a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a> → ℚ → <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/tactic.html#tactic">tactic</a> <a href="/home/rob/lean/mathlib/scripts/html_out/core/init/meta/expr.html#expr">expr</a></code>
<div class="indent"><p><p><code>expr.of_rat α q</code> embeds <code>q</code> as a numeral expression inside the type <code>α</code>.
Lean will try to infer the correct type classes on <code>α</code>, and the tactic will fail if it cannot.
This function is similar to <code>rat.mk_numeral</code> but it takes fewer hypotheses and is tactic valued.</p>
</p>       </div>
</div></body></html>
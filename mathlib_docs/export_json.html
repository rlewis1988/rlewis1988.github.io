<!DOCTYPE html><html lang="en"><head><title>export_json</title><meta charset="UTF-8"><link rel="stylesheet" href="https://robertylewis.com/mathlib_docs/style.css"></head><body><div class="mod_doc"><p></p>
</div><div class="cnst"><a id="decl_info"></a>      <span class="decl_name">decl_info</span>  <span class="decl_args">:</span>       <div class="decl_type">Type</div>
<div class="indent"><p>The information collected from each declaration</p>
       </div>
</div><div class="def"><a id="escape_quotes"></a>      <span class="decl_name">escape_quotes</span> <span class="decl_args">(s : <a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="decl_info.to_format"></a>      <span class="decl_name">decl_info.to_format</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/export_json.html#decl_info">decl_info</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/format.html#format">format</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="get_args_and_type"></a>      <span class="decl_name">get_args_and_type</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/expr.html#expr">expr</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a> × <a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a>)</div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="attribute_list"></a>      <span class="decl_name">attribute_list</span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a></div>
<div class="indent"><p>The attributes we check for</p>
       </div>
</div><div class="def"><a id="attributes_of"></a>      <span class="decl_name">attributes_of</span> <span class="decl_args">(n : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a>)</div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="declaration.kind"></a>      <span class="decl_name">declaration.kind</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="process_decl"></a>      <span class="decl_name">process_decl</span> <span class="decl_args">(d : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/declaration.html#declaration">declaration</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/meta/tactic.html#tactic">tactic</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#option">option</a> <a href="https://robertylewis.com/mathlib_docs/export_json.html#decl_info">decl_info</a>)</div>
<div class="indent"><p>extracts <code>decl_info</code> from <code>d</code>. Should return <code>none</code> instead of failing.</p>
       </div>
</div><div class="def"><a id="run_on_dcl_list"></a>      <span class="decl_name">run_on_dcl_list</span> <span class="decl_args">(e : <a href="https://robertylewis.com/mathlib_docs/core/init/meta/environment.html#environment">environment</a>)</span> <span class="decl_args">(ens : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> <a href="https://robertylewis.com/mathlib_docs/core/init/meta/name.html#name">name</a>)</span> <span class="decl_args">(handle : <a href="https://robertylewis.com/mathlib_docs/core/system/io.html#io.handle">io.handle</a>)</span> <span class="decl_args">(is_first : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#bool">bool</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/system/io.html#io">io</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a></div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="itersplit"></a>      <span class="decl_name">itersplit</span> <span class="decl_args">{α : Type u_1}</span> <span class="decl_args">(a : <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> α)</span> <span class="decl_args">(a_1 : ℕ)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> (<a href="https://robertylewis.com/mathlib_docs/core/init/core.html#list">list</a> α)</div>
<div class="indent"><p></p>
       </div>
</div><div class="def"><a id="export_json"></a>      <span class="decl_name">export_json</span> <span class="decl_args">(filename : <a href="https://robertylewis.com/mathlib_docs/core/init/data/string/basic.html#string">string</a>)</span> <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/system/io.html#io">io</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a></div>
<div class="indent"><p>Using <code>environment.mfold</code> is much cleaner. Unfortunately this led to a segfault, I think because
of a stack overflow. Converting the environment to a list of declarations and folding over that led
to "deep recursion detected". Instead, we split that list into 8 smaller lists and process them
one by one. More investigation is needed.</p>
       </div>
</div><div class="def"><a id="main"></a>      <span class="decl_name">main</span>  <span class="decl_args">:</span>       <div class="decl_type"><a href="https://robertylewis.com/mathlib_docs/core/system/io.html#io">io</a> <a href="https://robertylewis.com/mathlib_docs/core/init/core.html#unit">unit</a></div>
<div class="indent"><p></p>
       </div>
</div></body></html>
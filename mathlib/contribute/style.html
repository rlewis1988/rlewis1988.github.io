<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="file:///Storage/lean/leanprover-community.github.io/build//css/lean.css" >
  <link rel="shortcut icon" href="file:///Storage/lean/leanprover-community.github.io/build//img/favicon.ico">
	<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Merriweather:700">
    

	<script>
                function buildShortcutsForStructures(names) {
                        const o = {}
                        names.forEach(name => o[name] = `\\mathbb\{${name}\}`)
                        return o
                }
		MathJax = {
			  tex: {
                                  macros: {
                                          ...buildShortcutsForStructures(["R", "Q", "Z", "N", "C"]),
                                  },
				      inlineMath: [['$', '$'], ['\\(', '\\)']]
				    },
		};
	</script>
	<script type="text/javascript" id="MathJax-script" async
		  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
	</script>

	<title>Library Style Guidelines</title>
  </head>
  <body>
  <div id="wrapper">
  <nav class="navbar navbar-expand-lg navbar-light bg-gradient-light d-md-none">
    <div class="d-flex flex-grow-1">
		<a class="navbar-brand" href="file:///Storage/lean/leanprover-community.github.io/build/index.html">Lean Community
    </a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>
  <div class="container-fluid"><div class="row">
    <nav id="navbar" class="col-md-3 col-xl-2 d-md-block bg-light sidebar collapse navbar navbar-light pb-4">
      <div class="d-sm-none d-md-block"><a class="navbar-brand" href="file:///Storage/lean/leanprover-community.github.io/build/index.html">Lean Community</a></div>
      <div>
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Installation</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/get_started.html">Get started</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/install/linux.html">Linux installation</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/install/debian.html">Debian installation</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/install/macos.html">MacOS installation</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/install/windows.html">Windows installation</a></li>
        
          <li class="nav-item"><a href="https://leanprover-community.github.io/lean-web-editor">Online version (no installation)</a></li>
        </ul>
      </div><div>
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Documentation</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/learn.html">Big list of docs (start here)</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/extras/calc.html">calc mode</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/extras/conv.html">conv mode</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/extras/simp.html">simplifier</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/extras/tactic_writing.html">tactic writing tutorial</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/extras/well_founded_recursion.html">well-founded recursion</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/leanproject.html">leanproject</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/toolchain.html">How pieces fit together</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/mwe.html">About MWEs</a></li>
        
          <li class="nav-item"><a href="https://leanprover-community.github.io/mathlib_docs">API documentation</a></li>
        </ul>
      </div><div>
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Library overviews</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/mathlib-overview.html">Library overview</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/100.html">Wiedijk's 100 theorems</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/undergrad.html">Undergraduate maths</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/lean_projects.html">Other Lean projects</a></li>
        </ul>
      </div><div>
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Theory docs</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/theories/category_theory.html">Category theory</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/theories/linear_algebra.html">Linear algebra</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/theories/naturals.html">Natural numbers</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/theories/padics.html">p-adic numbers</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/theories/sets.html">Sets and set-like objects</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/theories/topology.html">Topology</a></li>
        </ul>
      </div><div>
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Contributing</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/contribute/index.html">Pull request lifecycle</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/contribute/naming.html">Naming conventions</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/contribute/style.html">Code style guideline</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/contribute/doc.html">Documentation style</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/ci.html">CI for 3rd party projects</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/mathlib_stats.html">Contribution statistics</a></li>
        </ul>
      </div><div>
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Community</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/meet.html">Maintainers</a></li>
        
          <li class="nav-item"><a href="file:///Storage/lean/leanprover-community.github.io/build/papers.html">Papers about Lean</a></li>
        
          <li class="nav-item"><a href="https://leanprover.zulipchat.com/">Zulip chat</a></li>
        </ul>
      </div>
    </nav>
  <main class="col-md-9 col-xl-8 px-md-4">
    <div class="mt-5 mx-auto" style="max-width: 60em">
	  
<h1 id="library-style-guidelines" class="markdown-heading">Library Style Guidelines <a class="hover-link" href="#library-style-guidelines">#</a></h1>
<p>Author: <a href="http://www.andrew.cmu.edu/user/avigad">Jeremy Avigad</a></p>
<p>In addition to the <a href="naming.html">naming conventions</a>,
files in the Lean library generally adhere to the following guidelines
and conventions. Having a uniform style makes it easier to browse the
library and read the contents, but these are meant to be guidelines
rather than rigid rules.</p>
<h3 id="variable-conventions" class="markdown-heading">Variable conventions <a class="hover-link" href="#variable-conventions">#</a></h3>
<ul>
<li><code>u</code>, <code>v</code>, <code>w</code>, ... for universes</li>
<li><code>α</code>, <code>β</code>, <code>γ</code>, ... for types</li>
<li><code>a</code>, <code>b</code>, <code>c</code>, ... for propositions</li>
<li><code>x</code>, <code>y</code>, <code>z</code>, ... for elements of a generic type</li>
<li><code>h</code>, <code>h₁</code>, ...     for assumptions</li>
<li><code>p</code>, <code>q</code>, <code>r</code>, ... for predicates and relations</li>
<li><code>s</code>, <code>t</code>, ...      for lists</li>
<li><code>s</code>, <code>t</code>, ...      for sets</li>
<li><code>m</code>, <code>n</code>, <code>k</code>, ... for natural numbers</li>
<li><code>i</code>, <code>j</code>, <code>k</code>, ... for integers</li>
</ul>
<h3 id="line-length" class="markdown-heading">Line length <a class="hover-link" href="#line-length">#</a></h3>
<p>Lines should not be longer than 100 characters. This makes files
easier to read, especially on a small screen or in a small window.</p>
<h3 id="header-and-imports" class="markdown-heading">Header and imports <a class="hover-link" href="#header-and-imports">#</a></h3>
<p>The file header should contain copyright information, a list of all
the authors who have made significant contributions to the file, and
a description of the contents. Do all <code>import</code>s right after the header,
without a line break, on separate lines. You can also open namespaces
in the same block.</p>
<div class="highlight"><pre><span></span><span class="c">/-</span><span class="cm"></span>
<span class="cm">Copyright (c) 2015 Joe Cool. All rights reserved.</span>
<span class="cm">Released under Apache 2.0 license as described in the file LICENSE.</span>
<span class="cm">Author: Joe Cool.</span>
<span class="cm">-/</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group</span>
<span class="kn">open</span> <span class="n">nat</span> <span class="n">eq</span><span class="bp">.</span><span class="n">ops</span>
</pre></div>

<p>(Tip: If you're editing mathlib in VS Code, you can write <code>copy</code>
and then press <kbd>TAB</kbd> to generate a skeleton of the copyright header.)</p>
<p>Regarding the list of authors: we don't have strict rules on what
contributions qualify for inclusion there. The general idea is that
the people listed there should be the ones we would reach out to if we had
questions about the design or development of the Lean code.</p>
<h3 id="module-docstrings" class="markdown-heading">Module docstrings <a class="hover-link" href="#module-docstrings">#</a></h3>
<p>After the copyright header and the imports,
please add a module docstring (delimited with <code>/-!</code> and <code>-/</code>) containing</p>
<ul>
<li>a title of the file,</li>
<li>a summary of the contents (the main definitions and theorems, proof techniques, etc…)</li>
<li>notation that has been used in the file (if any)</li>
<li>references to the literature (if any)</li>
</ul>
<p>In total, the module docstring should look something like this:</p>
<div class="highlight"><pre><span></span>/-!
# Foos and bars

In this file we introduce `foo` and `bar`,
two main concepts in the theory of xyzzyology.

## Main results

- `exists_foo`: the main existence theorem of `foo`s.
- `bar_of_foo`: a construction of a `bar`, given a `foo`.
- `bar_eq`    : the main classification theorem of `bar`s.

## Notation

 - `|_|` : The barrification operator, see `bar_of_foo`.

## References

See [Thales600BC] for the original account on Xyzzyology.
-/
</pre></div>

<p>New bibliography entries should be added to <code>docs/references.bib</code>.</p>
<p>See our <a href="doc.html">documentation requirements</a> for more suggestions and examples.</p>
<h3 id="structuring-definitions-and-theorems" class="markdown-heading">Structuring definitions and theorems <a class="hover-link" href="#structuring-definitions-and-theorems">#</a></h3>
<p>Use spaces around &quot;:&quot;, &quot;:=&quot; or infix operators. Put them before a line break rather
than at the beginning of the next line.</p>
<p>Use two spaces to indent.</p>
<p>After stating the theorem, we generally do not indent the first line
of a proof, so that the proof is &quot;flush left&quot; in the file.</p>
<div class="highlight"><pre><span></span><span class="kn">open</span> <span class="n">nat</span>
<span class="kn">theorem</span> <span class="n">nat_case</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">H1</span><span class="o">:</span> <span class="n">P</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">H2</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">m</span><span class="o">,</span> <span class="n">P</span> <span class="o">(</span><span class="n">succ</span> <span class="n">m</span><span class="o">))</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">n</span> <span class="n">H1</span> <span class="o">(</span><span class="k">assume</span> <span class="n">m</span> <span class="n">IH</span><span class="o">,</span> <span class="n">H2</span> <span class="n">m</span><span class="o">)</span>
</pre></div>

<p>When a proof term takes multiple arguments, it is sometimes clearer, and often
necessary, to put some of the arguments on subsequent lines. In that case,
indent each argument.</p>
<div class="highlight"><pre><span></span><span class="kn">open</span> <span class="n">nat</span>
<span class="kn">axiom</span> <span class="n">zero_or_succ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">zero</span> <span class="bp">∨</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">pred</span> <span class="n">n</span><span class="o">)</span>
<span class="kn">theorem</span> <span class="n">nat_discriminate</span> <span class="o">{</span><span class="n">B</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">(</span><span class="n">H1</span><span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">H2</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">m</span><span class="o">,</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">B</span> <span class="o">:=</span>
<span class="n">or</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">zero_or_succ</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">zero</span><span class="o">,</span> <span class="n">H1</span> <span class="n">H3</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">pred</span> <span class="n">n</span><span class="o">),</span> <span class="n">H2</span> <span class="o">(</span><span class="n">pred</span> <span class="n">n</span><span class="o">)</span> <span class="n">H3</span><span class="o">)</span>
</pre></div>

<p>Don't orphan parentheses; keep them with their arguments.</p>
<p>Here is a longer example.</p>
<div class="highlight"><pre><span></span><span class="kn">open</span> <span class="n">list</span>
<span class="kn">variable</span> <span class="o">{</span><span class="n">T</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>

<span class="kn">theorem</span> <span class="n">mem_split</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">T</span><span class="o">}</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">l</span> <span class="bp">→</span> <span class="bp">∃</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">,</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="bp">::</span><span class="n">t</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">list</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">l</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">[],</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">iff</span><span class="bp">.</span><span class="n">elim_left</span> <span class="o">(</span><span class="n">mem_nil_iff</span> <span class="bp">_</span><span class="o">)</span> <span class="n">H</span><span class="o">))</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">y</span> <span class="n">l</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">IH</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">l</span> <span class="bp">→</span> <span class="bp">∃</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">,</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="bp">::</span><span class="n">t</span><span class="o">),</span>
    <span class="k">assume</span> <span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">y</span><span class="bp">::</span><span class="n">l</span><span class="o">,</span>
    <span class="n">or</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">eq_or_mem_of_mem_cons</span> <span class="n">H</span><span class="o">)</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">H1</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
        <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span> <span class="o">[]</span> <span class="o">(</span><span class="n">exists</span><span class="bp">.</span><span class="n">intro</span> <span class="n">l</span> <span class="o">(</span><span class="k">by</span> <span class="n">rw</span> <span class="n">H1</span><span class="bp">;</span> <span class="n">refl</span><span class="o">)))</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">H1</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">l</span><span class="o">,</span>
        <span class="k">let</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="n">H2</span> <span class="o">:</span> <span class="bp">∃</span><span class="n">t</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">,</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="bp">::</span><span class="n">t</span><span class="o">))</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">IH</span> <span class="n">H1</span><span class="o">,</span>
            <span class="bp">⟨</span><span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">H3</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="bp">::</span><span class="n">t</span><span class="o">))</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">H2</span> <span class="k">in</span>
        <span class="k">have</span> <span class="n">H4</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">::</span> <span class="n">l</span> <span class="bp">=</span> <span class="o">(</span><span class="n">y</span><span class="bp">::</span><span class="n">s</span><span class="o">)</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="bp">::</span><span class="n">t</span><span class="o">),</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">H3</span><span class="bp">;</span> <span class="n">refl</span><span class="o">,</span>
        <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span> <span class="o">(</span><span class="n">y</span><span class="bp">::</span><span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">exists</span><span class="bp">.</span><span class="n">intro</span> <span class="n">t</span> <span class="n">H4</span><span class="o">)))</span>
</pre></div>

<p>A short definition can be written on a single line:</p>
<div class="highlight"><pre><span></span><span class="kn">open</span> <span class="n">nat</span>
<span class="kn">definition</span> <span class="n">square</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span>
</pre></div>

<p>For longer definitions, use conventions like those for theorems.</p>
<p>A &quot;have&quot; / &quot;from&quot; pair can be put on the same line.</p>
<div class="highlight"><pre><span></span><span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span> <span class="n">subst</span> <span class="o">(</span><span class="n">ne_symm</span> <span class="o">(</span><span class="n">succ_ne_zero</span> <span class="n">k</span><span class="o">))</span> <span class="o">(</span><span class="n">symm</span> <span class="n">H</span><span class="o">),</span>
<span class="o">[</span><span class="bp">...</span><span class="o">]</span>
</pre></div>

<p>You can also put it on the next line, if the justification is long.</p>
<div class="highlight"><pre><span></span><span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span>
  <span class="k">from</span> <span class="n">subst</span> <span class="o">(</span><span class="n">ne_symm</span> <span class="o">(</span><span class="n">succ_ne_zero</span> <span class="n">k</span><span class="o">))</span> <span class="o">(</span><span class="n">symm</span> <span class="n">H</span><span class="o">),</span>
<span class="o">[</span><span class="bp">...</span><span class="o">]</span>
</pre></div>

<p>If the justification takes more than a single line, keep the &quot;from&quot; on the same
line as the &quot;have&quot;, and then begin the justification indented on the next line.</p>
<div class="highlight"><pre><span></span><span class="k">have</span> <span class="n">n</span> <span class="bp">≠</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span>
  <span class="n">not_intro</span>
    <span class="o">(</span><span class="k">assume</span> <span class="n">H4</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">H5</span> <span class="o">:</span> <span class="n">succ</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span> <span class="n">trans</span> <span class="o">(</span><span class="n">symm</span> <span class="n">H</span><span class="o">)</span> <span class="n">H4</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">H6</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span> <span class="n">succ_inj</span> <span class="n">H5</span><span class="o">,</span>
      <span class="n">absurd</span> <span class="n">H6</span> <span class="n">H2</span><span class="o">)))),</span>
<span class="o">[</span><span class="bp">...</span><span class="o">]</span>
</pre></div>

<p>When the arguments themselves are long enough to require line breaks, use
an additional indent for every line after the first, as in the following
example:</p>
<div class="highlight"><pre><span></span><span class="kn">open</span> <span class="n">nat</span> <span class="n">eq</span> <span class="n">algebra</span>
<span class="kn">theorem</span> <span class="n">add_right_inj</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span> <span class="bp">→</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">k</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">H</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">k</span><span class="o">,</span>
    <span class="k">calc</span>
        <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="o">(</span><span class="n">zero_add</span> <span class="n">m</span><span class="o">)</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">k</span> <span class="o">:</span> <span class="n">H</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">k</span>     <span class="o">:</span> <span class="n">zero_add</span> <span class="bp">_</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">IH</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span> <span class="bp">→</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
    <span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span> <span class="k">from</span>
      <span class="k">calc</span>
        <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span>   <span class="o">:</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="o">(</span><span class="n">succ_add</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span>
                 <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span>   <span class="o">:</span> <span class="n">H</span>
                 <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="n">succ_add</span> <span class="n">n</span> <span class="n">k</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span> <span class="n">succ</span><span class="bp">.</span><span class="n">inj</span> <span class="n">H2</span><span class="o">,</span>
    <span class="n">IH</span> <span class="n">H3</span><span class="o">)</span>
</pre></div>

<p>In a class or structure definition, we do not indent fields, as in:</p>
<div class="highlight"><pre><span></span><span class="kn">structure</span> <span class="n">principal_seg</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">r</span> <span class="err">≼</span><span class="n">o</span> <span class="n">s</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">top</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span>
<span class="o">(</span><span class="n">down</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">b</span><span class="o">,</span> <span class="n">s</span> <span class="n">b</span> <span class="n">top</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">a</span><span class="o">,</span> <span class="n">to_order_embedding</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span>

<span class="n">class</span> <span class="n">module</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">out_param</span> <span class="err">$</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">out_param</span> <span class="err">$</span> <span class="n">ring</span> <span class="n">α</span><span class="o">]</span>
  <span class="kn">extends</span> <span class="n">has_scalar</span> <span class="n">α</span> <span class="n">β</span><span class="o">,</span> <span class="n">add_comm_group</span> <span class="n">β</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">smul_add</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">r</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">β</span><span class="o">),</span> <span class="n">r</span> <span class="err">•</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">r</span> <span class="err">•</span> <span class="n">y</span><span class="o">)</span>
<span class="o">(</span><span class="n">add_smul</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">r</span> <span class="n">s</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">β</span><span class="o">),</span> <span class="o">(</span><span class="n">r</span> <span class="bp">+</span> <span class="n">s</span><span class="o">)</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">r</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">s</span> <span class="err">•</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_smul</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">r</span> <span class="n">s</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">β</span><span class="o">),</span> <span class="o">(</span><span class="n">r</span> <span class="bp">*</span> <span class="n">s</span><span class="o">)</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">r</span> <span class="err">•</span> <span class="n">s</span> <span class="err">•</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">one_smul</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">x</span> <span class="o">:</span> <span class="n">β</span><span class="o">,</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
</pre></div>

<p>When using a constructor taking several arguments in a definition,
arguments line up, as in:</p>
<div class="highlight"><pre><span></span><span class="kn">theorem</span> <span class="n">sub_eq_zero_iff_le</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ordinal</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="n">h</span><span class="o">,</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="kn">using</span> <span class="n">le_add_sub</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
 <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="err">←</span> <span class="n">le_zero</span><span class="o">,</span> <span class="n">sub_le</span><span class="o">,</span> <span class="n">add_zero</span><span class="o">]</span><span class="bp">⟩</span>
</pre></div>

<p>When defining instances, opening and closing braces are not alone on
their line. The content is indented by two spaces and <code>:=</code> line up, as
in:</p>
<div class="highlight"><pre><span></span><span class="kn">instance</span> <span class="o">:</span> <span class="n">partial_order</span> <span class="o">(</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">le</span>          <span class="o">:=</span> <span class="bp">λ</span><span class="n">t</span> <span class="n">s</span><span class="o">,</span> <span class="n">t</span><span class="bp">.</span><span class="n">is_open</span> <span class="bp">≤</span> <span class="n">s</span><span class="bp">.</span><span class="n">is_open</span><span class="o">,</span>
  <span class="n">le_antisymm</span> <span class="o">:=</span> <span class="k">assume</span> <span class="n">t</span> <span class="n">s</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">topological_space_eq</span> <span class="err">$</span> <span class="n">le_antisymm</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="n">le_refl</span>     <span class="o">:=</span> <span class="k">assume</span> <span class="n">t</span><span class="o">,</span> <span class="n">le_refl</span> <span class="n">t</span><span class="bp">.</span><span class="n">is_open</span><span class="o">,</span>
  <span class="n">le_trans</span>    <span class="o">:=</span> <span class="k">assume</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="bp">@</span><span class="n">le_trans</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">a</span><span class="bp">.</span><span class="n">is_open</span> <span class="n">b</span><span class="bp">.</span><span class="n">is_open</span> <span class="n">c</span><span class="bp">.</span><span class="n">is_open</span> <span class="n">h₁</span> <span class="n">h₂</span> <span class="o">}</span>
</pre></div>

<h3 id="binders" class="markdown-heading">Binders <a class="hover-link" href="#binders">#</a></h3>
<p>Use a space after binders:</p>
<div class="highlight"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">y</span><span class="o">,</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span> <span class="n">x</span> <span class="n">rfl</span>
</pre></div>

<h3 id="calculations" class="markdown-heading">Calculations <a class="hover-link" href="#calculations">#</a></h3>
<p>There is some flexibility in how you write calculational proofs. In
general, it looks nice when the comparisons and justifications line up
neatly:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">list</span>
<span class="kn">open</span> <span class="n">list</span>
<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>

<span class="kn">theorem</span> <span class="n">reverse_reverse</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="bp">=</span> <span class="n">l</span>
<span class="bp">|</span> <span class="o">[]</span>       <span class="o">:=</span> <span class="n">rfl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="k">calc</span>
    <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">l</span><span class="o">))</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">concat</span> <span class="n">a</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">))</span>     <span class="o">:</span> <span class="n">rfl</span>
                           <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span> <span class="bp">++</span> <span class="o">[</span><span class="n">a</span><span class="o">])</span>         <span class="o">:</span> <span class="n">concat_eq_append</span>
                           <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">++</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="o">:</span> <span class="n">reverse_append</span>
                           <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">++</span> <span class="n">l</span>                   <span class="o">:</span> <span class="n">reverse_reverse</span>
                           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">::</span> <span class="n">l</span>                             <span class="o">:</span> <span class="n">rfl</span>
</pre></div>

<p>To be more compact, for example, you may do this only after the first line:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">list</span>
<span class="kn">open</span> <span class="n">list</span>
<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>

<span class="kn">theorem</span> <span class="n">reverse_reverse</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="bp">=</span> <span class="n">l</span>
<span class="bp">|</span> <span class="o">[]</span>       <span class="o">:=</span> <span class="n">rfl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="k">calc</span>
    <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">l</span><span class="o">))</span>
          <span class="bp">=</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">concat</span> <span class="n">a</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">))</span>     <span class="o">:</span> <span class="n">rfl</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span> <span class="bp">++</span> <span class="o">[</span><span class="n">a</span><span class="o">])</span>         <span class="o">:</span> <span class="n">concat_eq_append</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">++</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="o">:</span> <span class="n">reverse_append</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">++</span> <span class="n">l</span>                   <span class="o">:</span> <span class="n">reverse_reverse</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">::</span> <span class="n">l</span>                             <span class="o">:</span> <span class="n">rfl</span>
</pre></div>

<h3 id="tactic-mode" class="markdown-heading">Tactic mode <a class="hover-link" href="#tactic-mode">#</a></h3>
<p>When opening a tactic block, <code>begin</code> is not indented but everything
inside is indented, as in:</p>
<div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">div_self</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">/</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">hna</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">wit_aa</span> <span class="o">:=</span> <span class="n">quotient_mul_add_remainder_eq</span> <span class="n">a</span> <span class="n">a</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">a_mod_a</span> <span class="o">:=</span> <span class="n">mod_self</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">dsimp</span> <span class="o">[(</span><span class="err">%</span><span class="o">)]</span> <span class="n">at</span> <span class="n">a_mod_a</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">a_mod_a</span><span class="o">]</span> <span class="n">at</span> <span class="n">wit_aa</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">,</span> <span class="k">from</span> <span class="n">one_mul</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">conv</span> <span class="n">at</span> <span class="n">wit_aa</span> <span class="o">{</span><span class="n">for</span> <span class="n">a</span> <span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="o">{</span><span class="n">rw</span> <span class="err">←</span><span class="n">h1</span><span class="o">}},</span>
  <span class="n">exact</span> <span class="n">eq_of_mul_eq_mul_right</span> <span class="n">hna</span> <span class="n">wit_aa</span>
<span class="kn">end</span>
</pre></div>

<p>A more complicated example, mixing term mode and tactic mode:</p>
<div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">nhds_supr</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">w</span><span class="o">}</span> <span class="o">{</span><span class="n">t</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">topological_space</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">nhds</span> <span class="n">α</span> <span class="o">(</span><span class="n">supr</span> <span class="n">t</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="err">⨅</span><span class="n">i</span><span class="o">,</span> <span class="bp">@</span><span class="n">nhds</span> <span class="n">α</span> <span class="o">(</span><span class="n">t</span> <span class="n">i</span><span class="o">)</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">le_antisymm</span>
  <span class="o">(</span><span class="n">le_infi</span> <span class="err">$</span> <span class="k">assume</span> <span class="n">i</span><span class="o">,</span> <span class="n">nhds_mono</span> <span class="err">$</span> <span class="n">le_supr</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span>
  <span class="k">begin</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">supr_eq_generate_from</span><span class="o">,</span> <span class="n">nhds_generate_from</span><span class="o">],</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">le_infi</span> <span class="err">$</span> <span class="k">assume</span> <span class="n">s</span><span class="o">,</span> <span class="n">le_infi</span> <span class="err">$</span> <span class="k">assume</span> <span class="bp">⟨</span><span class="n">hs</span><span class="o">,</span> <span class="n">hi</span><span class="bp">⟩</span><span class="o">,</span>
      <span class="k">begin</span>
        <span class="n">simp</span> <span class="n">at</span> <span class="n">hi</span><span class="o">,</span> <span class="n">cases</span> <span class="n">hi</span> <span class="k">with</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span>
        <span class="n">exact</span> <span class="o">(</span><span class="n">infi_le_of_le</span> <span class="n">i</span> <span class="err">$</span> <span class="n">le_principal_iff</span><span class="bp">.</span><span class="n">mpr</span> <span class="err">$</span> <span class="bp">@</span><span class="n">mem_nhds_sets</span> <span class="n">α</span> <span class="o">(</span><span class="n">t</span> <span class="n">i</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hi</span> <span class="n">hs</span><span class="o">)</span>
      <span class="kn">end</span><span class="o">)</span>
  <span class="kn">end</span>
</pre></div>

<p>When new goals arise as side conditions or steps, they are enclosed in
focussing braces and indented. Braces are not alone on their line.</p>
<div class="highlight"><pre><span></span><span class="kn">lemma</span> <span class="n">mem_nhds_of_is_topological_basis</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)}</span>
  <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">is_topological_basis</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="err">∈</span> <span class="o">(</span><span class="err">𝓝</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">sets</span> <span class="bp">↔</span> <span class="bp">∃</span><span class="n">t</span><span class="err">∈</span><span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">t</span> <span class="bp">∧</span> <span class="n">t</span> <span class="err">⊆</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">hb</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">nhds_generate_from</span><span class="o">,</span> <span class="n">infi_sets_eq&#39;</span><span class="o">],</span>
  <span class="o">{</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">and_comm</span><span class="o">,</span> <span class="n">and</span><span class="bp">.</span><span class="n">left_comm</span><span class="o">]</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="k">assume</span> <span class="n">s</span> <span class="bp">⟨</span><span class="n">hs₁</span><span class="o">,</span> <span class="n">hs₂</span><span class="bp">⟩</span> <span class="n">t</span> <span class="bp">⟨</span><span class="n">ht₁</span><span class="o">,</span> <span class="n">ht₂</span><span class="bp">⟩</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">s</span> <span class="err">∩</span> <span class="n">t</span><span class="o">,</span> <span class="k">from</span> <span class="bp">⟨</span><span class="n">hs₁</span><span class="o">,</span> <span class="n">ht₁</span><span class="bp">⟩</span><span class="o">,</span>
      <span class="k">let</span> <span class="bp">⟨</span><span class="n">u</span><span class="o">,</span> <span class="n">hu₁</span><span class="o">,</span> <span class="n">hu₂</span><span class="o">,</span> <span class="n">hu₃</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">hb</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">_</span> <span class="n">hs₂</span> <span class="bp">_</span> <span class="n">ht₂</span> <span class="bp">_</span> <span class="n">this</span> <span class="k">in</span>
      <span class="bp">⟨</span><span class="n">u</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">hu₂</span><span class="o">,</span> <span class="n">hu₁</span><span class="bp">⟩</span><span class="o">,</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">hu₃</span><span class="bp">⟩</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">suffices</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="o">(</span><span class="err">⋃₀</span> <span class="n">b</span><span class="o">),</span> <span class="o">{</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">and_comm</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hb</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="o">],</span> <span class="n">trivial</span> <span class="o">}</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<p>The final step in a <code>begin ... end</code> block may be followed by comma,
but there is no style rule requiring it.
(Many authors prefer the comma, so that placing the cursor after it displays &quot;goals accomplished&quot;
in the infoview, but others dislike it on the basis of the disconcerting grammar.)</p>
<p>Often <code>t0 ; t1</code> is used to execute <code>t0</code> and then <code>t1</code> on all new goals. But <code>;</code> is not a <code>,</code> so
either write the tactics in one line, or indent the following tacic.</p>
<div class="highlight"><pre><span></span><span class="k">begin</span>
  <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>

<p>For single line tactic proofs (or short tactic proofs embedded in a term),
it is preferable to use <code>by ...</code> rather than <code>begin ... end</code>.</p>
<p>If you are using multiple tactics inside a <code>by ...</code> block, use braces
<code>by { tac1, tac2 }</code> rather than abusing the <code>;</code> operator <code>by tac1; tac2</code>,
which should only be used when multiple goals need to be processed by <code>tac2</code>.
(This style rule is not yet followed in the older parts of mathlib.)</p>
<h3 id="sections" class="markdown-heading">Sections <a class="hover-link" href="#sections">#</a></h3>
<p>Within a section, you can indent definitions and theorems to make the
scope salient:</p>
<div class="highlight"><pre><span></span><span class="kn">section</span> <span class="n">my_section</span>
  <span class="kn">variable</span> <span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span>
  <span class="kn">variable</span> <span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span>

  <span class="kn">definition</span> <span class="n">foo</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">x</span>

  <span class="kn">theorem</span> <span class="n">bar</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">P</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="o">:=</span> <span class="n">H</span>
<span class="kn">end</span> <span class="n">my_section</span>
</pre></div>

<p>If the section is long, however, you can omit the indents.</p>
<p>We generally use a blank line to separate theorems and definitions,
but this can be omitted, for example, to group together a number of
short definitions, or to group together a definition and notation.</p>
<h2 id="comments" class="markdown-heading">Comments <a class="hover-link" href="#comments">#</a></h2>
<p>Use module doc delimiters <code>/-! -/</code> to provide section headers and
separators since these get incorporated into the auto-generated docs,
and use <code>/- -/</code> for more technical comments (e.g. TODOs and
implementation notes) or for comments in proofs.
Use <code>--</code> for short or in-line comments.</p>
<p>Documentation strings for declarations are delimited with <code>/-- -/</code>.</p>
<p>See our <a href="doc.html">documentation requirements</a> for more suggestions
and examples.</p>
<hr />
<p>Copyright (c) 2016 Jeremy Avigad. All rights reserved.
Released under Apache 2.0 license as described in the file LICENSE.
Authors: Jeremy Avigad</p>

    </div>
  </main>
  </div></div>
</div>

  <nav class="footer navbar navbar-expand-lg navbar-light bg-light justify-content-end">
  <ul class="nav">
    <li class="nav-item">
      <a class="nav-link active" href="https://github.com/leanprover-community/leanprover-community.github.io/blob/newsite/templates/contribute/style.md">Suggest edits to this page on GitHub</a>
    </li>
  </ul>
</nav>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="file:///Storage/lean/leanprover-community.github.io/build//js/bootstrap.min.js"></script>
    
  </body>
</html>
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="https://robertylewis.com/mathlib/css/lean.css" >
  <link rel="shortcut icon" href="https://robertylewis.com/mathlib/img/favicon.ico">
<link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Open+Sans&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
    

	<script>
                function buildShortcutsForStructures(names) {
                        const o = {}
                        names.forEach(name => o[name] = `\\mathbb\{${name}\}`)
                        return o
                }
		MathJax = {
			  tex: {
                                  macros: {
                                          ...buildShortcutsForStructures(["R", "Q", "Z", "N", "C"]),
                                  },
				      inlineMath: [['$', '$'], ['\\(', '\\)']]
				    },
		};
	</script>
	<script type="text/javascript" id="MathJax-script" async
		  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
	</script>

	<title>Mathlib statistics</title>
  </head>
  <body>
  <nav class="navbar navbar-expand-lg navbar-light bg-gradient-light d-md-none">
    <div class="d-flex flex-grow-1">
		<a class="navbar-brand" href="https://robertylewis.com/mathlibindex.html">Lean Community
    </a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>
  <div class="container-fluid"><div class="row">
    <nav id="navbar" class="col-md-3 col-xl-2 d-md-block bg-light sidebar collapse navbar-light pb-4">
      <div class="d-none d-md-block mt-4"><a class="navbar-brand" href="https://robertylewis.com/mathlibindex.html">Lean Community</a></div>
      <div class="row">
      <div class="col-6 col-md-12">
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Community</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a class="d-block" href="https://leanprover.zulipchat.com/">Zulip chat</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://github.com/leanprover-community/mathlib">GitHub</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibmeet.html">Community information</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibpapers.html">Papers about Lean</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathliblean_projects.html">Projects using Lean</a></li>
        </ul>
      </div><div class="col-6 col-md-12">
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Installation</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibget_started.html">Get started</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibinstall/debian.html">Debian/Ubuntu installation</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibinstall/linux.html">Generic Linux installation</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibinstall/macos.html">MacOS installation</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibinstall/windows.html">Windows installation</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://leanprover-community.github.io/lean-web-editor">Online version (no installation)</a></li>
        </ul>
      </div><div class="col-6 col-md-12">
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Documentation</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathliblearn.html">Learning resources (start here)</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://leanprover-community.github.io/mathlib_docs">API documentation</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibextras/calc.html">calc mode</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibextras/conv.html">conv mode</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibextras/simp.html">simplifier</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibextras/tactic_writing.html">tactic writing tutorial</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibextras/well_founded_recursion.html">well-founded recursion</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibleanproject.html">leanproject</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibtoolchain.html">How pieces fit together</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibmwe.html">About MWEs</a></li>
        </ul>
      </div><div class="col-6 col-md-12">
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Library overviews</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibmathlib-overview.html">Library overview</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibundergrad.html">Undergraduate maths</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlib100.html">Wiedijk's 100 theorems</a></li>
        </ul>
      </div><div class="col-6 col-md-12">
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Theory docs</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibtheories/category_theory.html">Category theory</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibtheories/linear_algebra.html">Linear algebra</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibtheories/naturals.html">Natural numbers</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibtheories/sets.html">Sets and set-like objects</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibtheories/topology.html">Topology</a></li>
        </ul>
      </div><div class="col-6 col-md-12">
        <h6 class="sidebar-heading px-3 mt-4 mb-1">Contributing</h6>
        <ul class="nav flex-column">
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibcontribute/index.html">Pull request lifecycle</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibcontribute/naming.html">Naming conventions</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibcontribute/style.html">Code style guideline</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibcontribute/doc.html">Documentation style</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibci.html">CI for 3rd party projects</a></li>
        
          <li class="nav-item"><a class="d-block" href="https://robertylewis.com/mathlibmathlib_stats.html">Contribution statistics</a></li>
        </ul>
      </div>
      </div>
    </nav>
  <main class="col-md-9 col-xl-8 px-md-4">
    <div class="mx-auto mt-4" style="max-width: 60em">
	  

      <h1>Mathlib statistics</h1>

    <h2>Declaration Counts</h2>
  <div class="row">
    <div class="col-md-4">
      <h3>Definitions</h3>
      <h4>18464</h4>
    </div>
    <div class="col-md-4">
      <h3>Theorems</h3>
      <h4>38557</h4>
    </div>
    <div class="col-md-4">
      <h3>Meta declarations</h3>
      <h4>3927</h4>
    </div>
  </div>

    <h2>Code growth</h2>

      <canvas id="files_by_date"></canvas>

      <canvas id="lines_by_date"></canvas>

    <h2>Temporal distribution</h2>

      <canvas id="by_year_month"></canvas>

      <canvas id="by_year"></canvas>

    <h2>Authors</h2>

    <div>
       <div id="authors_table"></div>
    </div>

    <canvas id="lines_by_authors" class="mt-5"></canvas>

      <canvas id="commits_by_authors"></canvas>


    </div>
  </main>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"></script>
    <script src="https://robertylewis.com/mathlib/js/bootstrap.min.js"></script>
    
<script type="text/javascript" src="js/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

<link href="https://unpkg.com/tabulator-tables@4.6.2/dist/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.6.2/dist/js/tabulator.min.js"></script>

<script type="text/javascript" src="https://robertylewis.com/mathlib/mathlib_stats/gitstats.js"></script>

<script>

var color = Chart.helpers.color;
var blue = 'rgb(54, 162, 235)'

function makeBarChart(id, title, data) {
    var barChartData = {
        labels: data.labels,
        datasets: [{
            backgroundColor: color(blue).alpha(0.5).rgbString(),
            borderColor: blue,
            borderWidth: 1,
            data: data.data
        }]
    };

    var ctx = document.getElementById(id).getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: barChartData,
        options: {
            responsive: true,
            legend: {
                display: false,
            },
            title: {
                display: true,
                text: title
            }
        }
    });
}

colors = ['#377eb8',
    '#ff0029',  '#66a61e', '#984ea3', '#00d2d5', '#ff7f00',
    '#af8d00', '#7f80cd', '#b3e900', '#c42e60', '#a65628', '#f781bf',
    '#8dd3c7', '#bebada', '#fb8072']

function makeLineChart(id, title, stamps, datas, show_title = true,
    show_legend = true) {
    var ctx = document.getElementById(id).getContext('2d');
    var datasets = []
    colidx = 0
    for (const [name, data] of Object.entries(datas)) {
        datasets.push(
           { label: name,
             fill: false,
             borderColor: colors[colidx],
             data: data,
             cubicInterpolationMode: 'monotone',
             pointRadius: 1,
           })
        colidx = colidx + 1
    };
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: stamps,
            datasets : datasets
        },
        options: {
            title: {
                display: show_title,
                text: title
            },
            legend: {
                display: show_legend,
            },
            scales: {
                xAxes: [{
                    type: 'time',
                    time: {
                        unit: 'month',
                        parser: moment.unix,
                    },
                }]
            },
        },
    });
}
window.onload = function() {
    makeBarChart('by_year_month', 'Commits by month', by_year_month)
    makeBarChart('by_year', 'Commits by year', by_year)

    makeLineChart('lines_by_authors', 'Number of lines by author', stamps, lines_by_authors)
    makeLineChart('commits_by_authors', 'Number of commits by author', stamps, commits_by_authors)
    makeLineChart('files_by_date', 'Number of files', files_stamps,
        files_by_date, true, false)
    makeLineChart('lines_by_date', 'Number of lines', lines_stamps,
        lines_by_date, true, false)

    var table = new Tabulator("#authors_table", {
        data: authors, //set initial table data
        layout:"fitColumns",
        layoutColumnsOnNewData:true,
        responsiveLayout:true,
        columns: authors_cols,
        height: "600px",
    });
    table.redraw(true);

};


</script>

  </body>
</html>